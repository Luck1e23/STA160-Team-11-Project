<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Chest X-ray Classification for Multi-Label Pathologies</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Chest X-ray classification for multi-label thoracic pathologies using CNNs on the NIH ChestX-ray14 dataset." />

<style>
:root {
  --bg-0: #020617;
  --bg-1: #020617;
  --bg-2: #020617;
  --card-bg: rgba(9,14,27,0.98);
  --card-bg-soft: rgba(9,14,27,0.94);
  --card-border: rgba(148,163,255,0.8);
  --card-border-soft: rgba(148,163,255,0.3);
  --text-main: #e5edff;
  --text-muted: #a3b4d6;
  --text-soft: #7f8fb0;
  --accent-1: #7aa2ff;
  --accent-2: #8ef2d4;
  --accent-3: #60a5fa;
  --accent-4: #22c55e;
  --accent-5: #eab308;
  --radius-xl: 26px;
  --radius-lg: 22px;
  --radius-md: 18px;
  --radius-pill: 999px;
  --shadow-soft: 0 14px 40px rgba(15,23,42,0.9);
  --shadow-strong: 0 20px 70px rgba(0,0,0,1);
  --max-width: 1200px;
  --nav-height: 70px;
  --font-sans: system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Inter","Segoe UI",sans-serif;
  --transition-fast: 150ms ease-out;
  --transition-med: 230ms ease-out;
  --transition-slow: 420ms ease-out;
}
*,
*::before,
*::after {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}
html,body {
  margin: 0;
  padding: 0;
  height: 100%;
  scroll-behavior: smooth;
}
body {
  font-family: var(--font-sans);
  background:
    radial-gradient(circle at 0 0, rgba(129,140,248,0.4), transparent 60%),
    radial-gradient(circle at 100% 100%, rgba(56,189,248,0.3), transparent 60%),
    linear-gradient(180deg,var(--bg-1),var(--bg-2));
  color: var(--text-main);
  line-height: 1.65;
  overflow-x: hidden;
}
img {
  max-width: 100%;
  display: block;
}
a {
  color: inherit;
  text-decoration: none;
}
button {
  font-family: inherit;
}
.page-shell {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
.container {
  width: min(100% - 3rem, var(--max-width));
  margin-inline: auto;
  position: relative;
  z-index: 1;
}

/* header */
header {
  position: fixed;
  inset-inline: 0;
  top: 0;
  z-index: 60;
  background: linear-gradient(180deg, rgba(15,23,42,0.98), rgba(15,23,42,0.93));
  border-bottom: 1px solid rgba(148,163,255,0.5);
  box-shadow: 0 14px 40px rgba(15,23,42,0.96);
}
.nav-inner {
  width: min(100% - 3rem, var(--max-width));
  margin-inline: auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: var(--nav-height);
}
.nav-left {
  display: flex;
  align-items: center;
  gap: .85rem;
}
.nav-logo {
  width: 38px;
  height: 38px;
  border-radius: 14px;
  background: conic-gradient(from 220deg,#8ef2d4,#4f46e5,#7aa2ff,#8ef2d4);
  display: grid;
  place-items: center;
  color: #020617;
  font-weight: 800;
  font-size: 18px;
  box-shadow: 0 0 0 1px rgba(248,250,252,0.98),0 12px 32px rgba(15,23,42,0.96);
}
.nav-title-main {
  font-size: .96rem;
  font-weight: 600;
  letter-spacing: .12em;
  text-transform: uppercase;
}
.nav-title-sub {
  font-size: .78rem;
  color: var(--text-soft);
}
.nav-links {
  display: flex;
  align-items: center;
  gap: .25rem;
}
.nav-link {
  padding: .46rem .9rem;
  border-radius: var(--radius-pill);
  font-size: .9rem;
  color: #e5edff;
  opacity: .96;
  display: inline-flex;
  align-items: center;
  gap: .24rem;
  transition: background var(--transition-fast),color var(--transition-fast),transform var(--transition-fast),box-shadow var(--transition-fast),opacity var(--transition-fast);
}
.nav-link span.icon {
  font-size: .8rem;
}
.nav-link:hover {
  background: radial-gradient(circle at 0 0, rgba(148,255,225,0.5), transparent 60%);
  transform: translateY(-1px);
  opacity: 1;
}
.nav-link-primary {
  background-image: linear-gradient(120deg,var(--accent-1),var(--accent-3),var(--accent-4));
  background-size: 200% 200%;
  color: #020617;
  font-weight: 600;
  padding-inline: 1.2rem;
  box-shadow: 0 12px 34px rgba(0,0,0,0.96);
  animation: navGradient 12s ease-in-out infinite;
}
.nav-item {
  position: relative;
}
.nav-mega-toggle {
  border: none;
  background: transparent;
  padding: 0;
  cursor: pointer;
}
.nav-link-ghost {
  border-radius: var(--radius-pill);
  padding: .46rem .9rem;
  background: transparent;
}

/* mega panel */
.mega {
  position: absolute;
  inset-inline: auto 0;
  right: -10px;
  top: calc(100% + 8px);
  min-width: 540px;
  max-width: 720px;
  transform-origin: top right;
  transform: translateY(6px) scale(0.98);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition-med),transform var(--transition-med);
  z-index: -1;
}
.mega-inner {
  border-radius: 20px;
  border: 1px solid rgba(148,163,255,0.7);
  background: radial-gradient(circle at 0 0, rgba(148,255,225,0.3), transparent 60%),rgba(10,18,35,0.99);
  box-shadow: 0 18px 50px rgba(0,0,0,0.96);
  padding: 1rem 1.15rem;
}
.mega-grid {
  display: grid;
  grid-template-columns: repeat(3,minmax(0,1fr));
  gap: 1rem;
}
.mega-col-title {
  font-size: .78rem;
  font-weight: 600;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: #c7d2fe;
  margin-bottom: .4rem;
}
.mega-link {
  display: block;
  padding: .32rem .36rem .4rem 0;
  font-size: .86rem;
  color: #e5edff;
  border-radius: 10px;
  transition: background var(--transition-fast),transform var(--transition-fast),color var(--transition-fast);
}
.mega-link span.label {
  display: block;
}
.mega-link span.desc {
  display: block;
  font-size: .78rem;
  color: var(--text-soft);
}
.mega-link:hover {
  background: rgba(15,23,42,0.98);
  transform: translateY(-1px);
}
.nav-item.show-mega .mega {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
  z-index: 40;
}

/* mobile nav */
.nav-shell {
  position: relative;
}
.nav-toggle {
  display: none;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,255,0.85);
  background: radial-gradient(circle at 20% 0, rgba(148,255,225,0.7), transparent 60%),rgba(15,23,42,0.98);
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 12px 32px rgba(0,0,0,0.96);
}
.nav-toggle-bar {
  width: 16px;
  height: 2px;
  border-radius: 999px;
  background: #e5edff;
  position: relative;
}
.nav-toggle-bar::before,
.nav-toggle-bar::after {
  content: "";
  position: absolute;
  inset-inline: 0;
  height: 2px;
  border-radius: 999px;
  background: inherit;
}
.nav-toggle-bar::before { top: -5px; }
.nav-toggle-bar::after { top: 5px; }
.nav-shell.nav-open .nav-toggle-bar {
  background: transparent;
}
.nav-shell.nav-open .nav-toggle-bar::before {
  top: 0;
  transform: rotate(45deg);
}
.nav-shell.nav-open .nav-toggle-bar::after {
  top: 0;
  transform: rotate(-45deg);
}
.nav-mobile {
  display: none;
  position: fixed;
  inset-inline: 0;
  top: var(--nav-height);
  background: radial-gradient(circle at 0 0, rgba(148,255,225,0.25), transparent 60%),rgba(10,18,35,0.99);
  border-bottom: 1px solid rgba(148,163,255,0.45);
  box-shadow: 0 16px 40px rgba(0,0,0,0.96);
  z-index: 55;
}
.nav-mobile-inner {
  width: min(100% - 3rem, var(--max-width));
  margin-inline: auto;
  padding: .7rem 0 1rem;
  display: grid;
  gap: .25rem;
}
.nav-shell.nav-open .nav-mobile {
  display: block;
}
.nav-mobile a {
  padding: .65rem .9rem;
  border-radius: var(--radius-pill);
  font-size: .9rem;
  background: rgba(15,23,42,0.98);
  border: 1px solid rgba(148,163,255,0.6);
}

/* hero */
.hero {
  position: relative;
  min-height: calc(100vh - var(--nav-height));
  display: flex;
  align-items: center;
  padding: 5.1rem 0 4rem;
}
.hero-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}
.hero-layer.is-gradient {
  background:
    radial-gradient(1000px 650px at 0 0, rgba(129,140,248,0.45), transparent 70%),
    radial-gradient(880px 620px at 100% 100%, rgba(56,189,248,0.3), transparent 70%);
  opacity: .9;
  mix-blend-mode: screen;
}
.hero-layer.is-particles {
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(248,250,252,0.85), transparent),
    radial-gradient(2px 2px at 80% 70%, rgba(248,250,252,0.8), transparent),
    radial-gradient(1.5px 1.5px at 40% 80%, rgba(148,163,255,0.9), transparent),
    radial-gradient(1.5px 1.5px at 15% 75%, rgba(52,211,153,0.9), transparent);
  opacity: .3;
  animation: starDrift 26s linear infinite alternate;
}
.hero-inner {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: minmax(0,1.1fr) minmax(0,.95fr);
  gap: 2.7rem;
  align-items: center;
}
.hero-kicker {
  font-size: .86rem;
  letter-spacing: .2em;
  text-transform: uppercase;
  color: var(--accent-2);
  font-weight: 600;
}
.hero-title {
  margin: .6rem 0 .9rem;
  font-size: clamp(2.5rem, 4.6vw, 3.5rem);
  line-height: 1.05;
  letter-spacing: .05em;
}
.hero-title span {
  background: linear-gradient(120deg,#ffffff,#dbeafe,#bbf7d0);
  -webkit-background-clip: text;
  color: transparent;
}
.hero-subtitle {
  font-size: 1rem;
  color: var(--text-muted);
  max-width: 40rem;
}
.hero-actions {
  display: flex;
  flex-wrap: wrap;
  gap: .85rem;
  margin-top: 1.8rem;
}
.btn {
  border: none;
  border-radius: var(--radius-pill);
  padding: .9rem 1.5rem;
  font-size: .95rem;
  font-weight: 600;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: .45rem;
  background: rgba(15,23,42,0.98);
  color: #e5edff;
  border: 1px solid rgba(148,163,255,0.4);
  box-shadow: 0 12px 32px rgba(0,0,0,0.96);
  transition: transform var(--transition-fast),box-shadow var(--transition-fast),background var(--transition-fast),color var(--transition-fast),border-color var(--transition-fast),filter var(--transition-fast);
}
.btn span.icon {
  font-size: .98rem;
}
.btn-primary {
  background-image: linear-gradient(120deg,var(--accent-1),var(--accent-3),var(--accent-4));
  background-size: 200% 200%;
  color: #020617;
  border-color: transparent;
  animation: heroButton 10s ease-in-out infinite;
}
.btn-secondary {
  background: radial-gradient(circle at 0 0, rgba(148,255,225,0.45), transparent 60%),rgba(15,23,42,0.99);
}
.btn-ghost {
  background: transparent;
  border-color: rgba(148,163,255,0.5);
  color: var(--text-soft);
}
.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 16px 40px rgba(0,0,0,0.98);
  filter: brightness(1.05);
}

/* hero metrics */
.hero-metrics {
  display: flex;
  flex-wrap: wrap;
  gap: .9rem;
  margin-top: 2.1rem;
}
.metric-card {
  flex: 1 1 150px;
  min-width: 150px;
  background: radial-gradient(circle at 0 0, rgba(148,255,225,0.3), transparent 60%),rgba(10,18,35,0.99);
  border-radius: 20px;
  border: 1px solid var(--card-border-soft);
  padding: 1.06rem 1.08rem 1.2rem;
  box-shadow: var(--shadow-soft);
  transform-style: preserve-3d;
  transition: transform var(--transition-med),box-shadow var(--transition-med),border-color var(--transition-med),background var(--transition-med),filter var(--transition-med);
}
.metric-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-strong);
  border-color: var(--card-border);
  filter: brightness(1.04);
}
.metric-label {
  font-size: .78rem;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: #c7d2fe;
}
.metric-value {
  font-size: 1.52rem;
  font-weight: 800;
  display: flex;
  align-items: baseline;
  gap: .18rem;
  margin-top: .22rem;
}
.metric-value span.suffix {
  font-size: .9rem;
  color: var(--text-soft);
}
.metric-caption {
  font-size: .83rem;
  color: var(--text-soft);
  margin-top: .22rem;
}

/* hero panel + upload */
.hero-panel {
  position: relative;
  border-radius: var(--radius-xl);
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.42), transparent 60%),
    radial-gradient(circle at 100% 0, rgba(59,130,246,0.4), transparent 60%),
    rgba(10,18,35,0.99);
  border: 1px solid rgba(148,163,255,0.7);
  padding: 1.15rem 1.2rem 1.1rem;
  box-shadow: var(--shadow-strong);
  overflow: hidden;
}
.hero-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: .8rem;
}
.hero-panel-title {
  font-size: .96rem;
  font-weight: 600;
}
.hero-panel-chip {
  padding: .16rem .74rem;
  border-radius: var(--radius-pill);
  border: 1px solid rgba(191,219,254,0.96);
  font-size: .8rem;
  color: #e5edff;
  background: rgba(15,23,42,0.99);
}
.hero-preview {
  border-radius: 21px;
  background:
    radial-gradient(920px 360px at 0% 0%, rgba(129,140,248,0.45), transparent 65%),
    linear-gradient(180deg, rgba(15,23,42,0.99), rgba(15,23,42,0.93));
  border: 1px dashed rgba(191,219,254,0.95);
  display: grid;
  place-items: center;
  color: var(--text-soft);
  height: 230px;
  cursor: zoom-in;
  overflow: hidden;
}
.hero-preview-inner {
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
}
.hero-preview img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: none;
}
.hero-preview-placeholder {
  font-size: .87rem;
  text-align: center;
  max-width: 80%;
}
.hero-panel-footer {
  margin-top: .8rem;
  display: grid;
  grid-template-columns: minmax(0,1.3fr) auto;
  gap: .6rem .75rem;
  align-items: center;
}
.hero-input {
  border-radius: var(--radius-pill);
  padding: .5rem .96rem;
  font-size: .86rem;
  border: 1px solid rgba(191,219,254,0.95);
  background: rgba(15,23,42,0.99);
  color: var(--text-main);
}
.fake-file-input {
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  max-width: 260px;
  cursor: pointer;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.fake-file-input span {
  font-size: .86rem;
}
.hero-upload-btn {
  padding-inline: 1.18rem;
  font-size: .88rem;
}
.hero-panel-tip {
  grid-column: 1 / -1;
  font-size: .8rem;
  color: var(--text-soft);
}

/* sections core */
main section {
  position: relative;
  padding: 4.2rem 0;
}
section[id] {
  scroll-margin-top: calc(var(--nav-height) + 24px);
}
main section::before {
  content: "";
  position: absolute;
  inset: 0;
  opacity: .2;
  pointer-events: none;
  background:
    radial-gradient(620px 340px at 6% 0, rgba(59,130,246,0.28), transparent 60%),
    radial-gradient(620px 340px at 100% 100%, rgba(56,189,248,0.26), transparent 60%);
  mix-blend-mode: soft-light;
  z-index: -1;
}
.section-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 1.2rem;
  margin-bottom: 1.9rem;
}
.section-title-block h2 {
  margin: 0 0 .4rem;
  font-size: 1.6rem;
  letter-spacing: .18em;
  text-transform: uppercase;
}
.section-title-block p {
  margin: 0;
  font-size: .93rem;
  color: var(--text-muted);
  max-width: 34rem;
}
.section-tag {
  padding: .2rem .9rem;
  border-radius: var(--radius-pill);
  border: 1px solid var(--card-border-soft);
  font-size: .8rem;
  color: #c7d2fe;
  background: rgba(10,18,35,0.98);
  display: inline-flex;
  align-items: center;
  gap: .32rem;
}
.section-tag span.dot {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: var(--accent-4);
  box-shadow: 0 0 12px rgba(34,197,94,1);
}

/* grid + card base */
.grid {
  display: grid;
  gap: 1.08rem;
}
.grid-2 {
  grid-template-columns: repeat(2,minmax(0,1fr));
}
.grid-3 {
  grid-template-columns: repeat(3,minmax(0,1fr));
}
.card {
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.3), transparent 60%),
    var(--card-bg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--card-border-soft);
  padding: 1.22rem 1.18rem 1.3rem;
  box-shadow: var(--shadow-soft);
  position: relative;
  overflow: hidden;
  transform-style: preserve-3d;
  transition: transform var(--transition-med),box-shadow var(--transition-med),border-color var(--transition-med),background var(--transition-med),filter var(--transition-med);
}
.card::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.45), transparent 60%),
    radial-gradient(circle at 100% 100%, rgba(59,130,246,0.45), transparent 60%);
  opacity: 0;
  mix-blend-mode: soft-light;
  pointer-events: none;
  transition: opacity var(--transition-med);
}
.card:hover {
  transform: translateY(-4px);
  border-color: var(--card-border);
  box-shadow: var(--shadow-strong);
  filter: brightness(1.04);
}
.card:hover::before {
  opacity: 1;
}
.card h3 {
  margin: 0 0 .45rem;
  font-size: 1.04rem;
}
.card p {
  margin: 0;
  font-size: .9rem;
  color: var(--text-muted);
}
.card-chips {
  display: flex;
  flex-wrap: wrap;
  gap: .42rem;
  margin-top: .8rem;
}
.chip {
  padding: .16rem .7rem;
  border-radius: var(--radius-pill);
  border: 1px solid var(--card-border-soft);
  background: rgba(10,18,35,0.98);
  font-size: .78rem;
  color: #c7d2fe;
}

/* timeline */
.timeline {
  display: grid;
  gap: 1.05rem;
}
.step {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: .92rem;
  align-items: flex-start;
}
.step-bullet {
  width: 18px;
  height: 18px;
  border-radius: 999px;
  background:
    radial-gradient(circle at 25% 0, rgba(148,255,225,0.9), transparent 65%),
    #020617;
  border: 1px solid rgba(191,219,254,0.95);
  box-shadow: 0 0 0 4px rgba(59,130,246,0.45);
  margin-top: .08rem;
}
.step strong {
  font-size: .96rem;
}
.step p {
  margin: .18rem 0 0;
  font-size: .9rem;
  color: var(--text-muted);
}

/* tables */
.table-wrap {
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid var(--card-border-soft);
  background: rgba(9,14,27,0.98);
}
table {
  width: 100%;
  border-collapse: collapse;
  font-size: .86rem;
}
thead {
  background:
    radial-gradient(circle at 0 0, rgba(96,165,250,0.34), transparent 70%),
    rgba(15,23,42,0.98);
}
th,td {
  padding: .78rem .9rem;
  text-align: left;
  border-bottom: 1px solid rgba(148,163,255,0.18);
}
th {
  font-size: .79rem;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: #c7d2fe;
}
tbody tr:nth-child(even) {
  background: rgba(10,18,35,0.98);
}
tbody tr:hover {
  background:
    radial-gradient(circle at 0 0, rgba(56,189,248,0.16), transparent 60%),
    rgba(10,18,35,0.98);
}
.results-note {
  font-size: .82rem;
  color: var(--text-soft);
  margin-top: .55rem;
}

/* roc/confusion gallery */
.dynamic-gallery {
  display: flex;
  flex-wrap: wrap;
  gap: .72rem;
}
.dynamic-gallery img {
  width: calc(33.333% - .72rem);
  border-radius: 16px;
  border: 1px solid var(--card-border-soft);
  background: #020617;
  object-fit: cover;
  aspect-ratio: 4/3;
  cursor: zoom-in;
  transition: transform var(--transition-med),box-shadow var(--transition-med),border-color var(--transition-med),filter var(--transition-med);
}
.dynamic-gallery img:hover {
  transform: translateY(-3px) scale(1.03);
  box-shadow: var(--shadow-soft);
  border-color: var(--card-border);
  filter: brightness(1.05);
}

/* label explorer */
.explorer-shell {
  display: grid;
  grid-template-columns: minmax(0,0.9fr) minmax(0,1.1fr);
  gap: 1rem;
}
.explorer-labels {
  border-radius: 20px;
  background: var(--card-bg-soft);
  border: 1px solid var(--card-border-soft);
  padding: .8rem;
  box-shadow: var(--shadow-soft);
}
.label-scroll {
  display: flex;
  flex-wrap: wrap;
  gap: .4rem;
  max-height: 210px;
  overflow-y: auto;
}
.label-pill {
  padding: .28rem .8rem;
  border-radius: var(--radius-pill);
  border: 1px solid rgba(148,163,255,0.5);
  background: rgba(15,23,42,0.98);
  font-size: .8rem;
  color: var(--text-soft);
  cursor: pointer;
  transition: background var(--transition-fast),border-color var(--transition-fast),color var(--transition-fast),transform var(--transition-fast);
}
.label-pill span.dot {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  margin-right: .3rem;
  display: inline-block;
  background: var(--accent-4);
}
.label-pill.active {
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.45), transparent 60%),
    rgba(15,23,42,0.98);
  color: #e5edff;
  border-color: rgba(148,163,255,0.9);
  transform: translateY(-1px);
}
.explorer-detail {
  border-radius: 20px;
  background: rgba(9,14,27,0.98);
  border: 1px solid var(--card-border-soft);
  padding: 1rem 1.1rem;
  box-shadow: var(--shadow-soft);
}
.explorer-title {
  font-size: .98rem;
  font-weight: 600;
  margin-bottom: .35rem;
}
.explorer-meta {
  display: flex;
  flex-wrap: wrap;
  gap: .45rem;
  margin-bottom: .6rem;
}
.meta-chip {
  padding: .16rem .68rem;
  border-radius: var(--radius-pill);
  border: 1px solid rgba(148,163,255,0.5);
  background: rgba(15,23,42,0.98);
  font-size: .78rem;
  color: #c7d2fe;
}
.explorer-text {
  font-size: .85rem;
  color: var(--text-soft);
}
.explorer-mini-table {
  margin-top: .7rem;
  border-radius: 14px;
  border: 1px solid rgba(148,163,255,0.28);
  overflow: hidden;
}
.explorer-mini-table table {
  font-size: .82rem;
}
.explorer-mini-table th,
.explorer-mini-table td {
  padding: .46rem .7rem;
}

/* Grad-CAM case explorer */
.case-tabs {
  display: inline-flex;
  flex-wrap: wrap;
  gap: .42rem;
  margin-bottom: .9rem;
}
.case-tab {
  padding: .34rem .84rem;
  border-radius: var(--radius-pill);
  border: 1px solid rgba(148,163,255,0.5);
  background: rgba(10,18,35,0.98);
  font-size: .8rem;
  color: var(--text-soft);
  cursor: pointer;
  transition: background var(--transition-fast),color var(--transition-fast),border-color var(--transition-fast),transform var(--transition-fast);
}
.case-tab.active {
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.5), transparent 60%),
    rgba(15,23,42,0.98);
  color: #e5edff;
  border-color: rgba(148,163,255,0.9);
  transform: translateY(-1px);
}
.compare-grid {
  display: grid;
  grid-template-columns: minmax(0,1fr);
  gap: 1rem;
}
.compare {
  position: relative;
  border-radius: 20px;
  overflow: hidden;
  border: 1px solid var(--card-border-soft);
  background: #020617;
  box-shadow: var(--shadow-soft);
}
.compare-inner {
  position: relative;
  overflow: hidden;
  height: 260px;
  cursor: zoom-in;
}
.compare-before,
.compare-after {
  position: absolute;
  inset: 0;
}
.compare-img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.compare-after {
  clip-path: inset(0 0 0 50%);
}
.compare-labels {
  position: absolute;
  inset: .82rem .9rem auto;
  display: flex;
  justify-content: space-between;
  pointer-events: none;
}
.compare-label {
  padding: .17rem .64rem;
  border-radius: var(--radius-pill);
  background: rgba(10,18,35,0.98);
  font-size: .78rem;
  border: 1px solid rgba(191,219,254,0.96);
}
.compare-slider {
  position: absolute;
  inset-inline: 0;
  bottom: 0;
  padding: .5rem .9rem .72rem;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,0.9));
  display: flex;
  align-items: center;
  gap: .42rem;
}
.compare-slider input[type="range"] {
  flex: 1;
  appearance: none;
  height: 4px;
  border-radius: 999px;
  background: rgba(148,163,255,0.7);
  outline: none;
}
.compare-slider input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: #e5edff;
  border: 2px solid rgba(15,23,42,0.98);
  box-shadow: 0 0 0 4px rgba(148,163,255,0.5);
}
.compare-slider input[type="range"]::-moz-range-thumb {
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: #e5edff;
  border: 2px solid rgba(15,23,42,0.98);
}

/* qualitative examples */
.qual-grid {
  display: grid;
  grid-template-columns: repeat(3,minmax(0,1fr));
  gap: 1.08rem;
}
.qual-card {
  border-radius: 20px;
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.32), transparent 60%),
    rgba(10,18,35,0.98);
  border: 1px solid var(--card-border-soft);
  padding: 1.18rem 1.12rem 1.25rem;
  box-shadow: var(--shadow-soft);
  transition: transform var(--transition-med),box-shadow var(--transition-med),border-color var(--transition-med),filter var(--transition-med);
}
.qual-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-strong);
  border-color: var(--card-border);
  filter: brightness(1.04);
}
.qual-title {
  margin: 0 0 .45rem;
  font-size: .99rem;
}
.qual-img {
  border-radius: 15px;
  border: 1px dashed rgba(191,219,254,0.95);
  background: #020617;
  display: grid;
  place-items: center;
  font-size: .86rem;
  color: var(--text-soft);
  aspect-ratio: 4/3;
  margin-bottom: .55rem;
  cursor: zoom-in;
}
.qual-text {
  font-size: .84rem;
  color: var(--text-soft);
}

/* extra cxr gallery */
.cxr-gallery {
  display: grid;
  grid-template-columns: repeat(3,minmax(0,1fr));
  gap: .8rem;
}
.cxr-item {
  border-radius: 16px;
  border: 1px solid var(--card-border-soft);
  background: #020617;
  overflow: hidden;
  cursor: zoom-in;
  box-shadow: var(--shadow-soft);
  transition: transform var(--transition-med),box-shadow var(--transition-med),border-color var(--transition-med),filter var(--transition-med);
}
.cxr-item img {
  width: 100%;
  height: 210px;
  object-fit: cover;
}
.cxr-label {
  padding: .45rem .75rem .55rem;
  font-size: .82rem;
  color: var(--text-soft);
  border-top: 1px solid rgba(148,163,255,0.2);
}
.cxr-item:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-strong);
  border-color: var(--card-border);
  filter: brightness(1.05);
}

/* team */
.team-section {
  position: relative;
  overflow: hidden;
}
.team-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(1000px 500px at 10% 0, rgba(59,130,246,0.5), transparent 60%),
    radial-gradient(900px 460px at 90% 100%, rgba(34,197,94,0.42), transparent 60%);
  opacity: .9;
  mix-blend-mode: screen;
  pointer-events: none;
  z-index: -2;
}
.team-stars {
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(248,250,252,0.85), transparent),
    radial-gradient(2px 2px at 80% 70%, rgba(248,250,252,0.8), transparent),
    radial-gradient(1.5px 1.5px at 40% 80%, rgba(148,163,255,0.9), transparent),
    radial-gradient(1.5px 1.5px at 15% 75%, rgba(52,211,153,0.9), transparent);
  opacity: .34;
  pointer-events: none;
  z-index: -1;
}
.team-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1.2rem;
  margin-bottom: 1.8rem;
}
.team-title-block h2 {
  margin: 0;
  font-size: 1.62rem;
  letter-spacing: .18em;
  text-transform: uppercase;
}
.team-title-block p {
  margin: .5rem 0 0;
  font-size: .93rem;
  color: var(--text-muted);
  max-width: 40rem;
}
.team-pill {
  padding: .2rem .92rem;
  border-radius: var(--radius-pill);
  border: 1px solid var(--card-border);
  background: rgba(10,18,35,0.98);
  font-size: .8rem;
  color: #c7d2fe;
  display: inline-flex;
  align-items: center;
  gap: .3rem;
}
.team-pill span.dot {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: var(--accent-4);
  box-shadow: 0 0 12px rgba(34,197,94,1);
}
.team-row {
  display: grid;
  grid-template-columns: repeat(5,minmax(0,1fr));
  gap: 1.05rem;
  margin-top: 1rem;
}
.team-card {
  border-radius: 22px;
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.6), transparent 60%),
    radial-gradient(circle at 100% 0, rgba(59,130,246,0.5), transparent 60%),
    rgba(10,18,35,0.98);
  border: 1px solid var(--card-border-soft);
  padding: 1.3rem 1.1rem 1.4rem;
  text-align: center;
  position: relative;
  box-shadow: var(--shadow-soft);
  overflow: hidden;
  transition: transform var(--transition-med),box-shadow var(--transition-med),border-color var(--transition-med),background var(--transition-med),filter var(--transition-med);
}
.team-card::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(circle at 0 0, rgba(148,255,225,0.65), transparent 60%),
    radial-gradient(circle at 100% 100%, rgba(59,130,246,0.8), transparent 60%);
  mix-blend-mode: soft-light;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition-med);
}
.team-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-strong);
  border-color: var(--card-border);
  filter: brightness(1.04);
}
.team-card:hover::before {
  opacity: 1;
}
.team-avatar {
  width: 78px;
  height: 78px;
  border-radius: 999px;
  margin-inline: auto;
  background: conic-gradient(from 220deg,#8ef2d4,#4f46e5,#7aa2ff,#8ef2d4);
  display: grid;
  place-items: center;
  font-weight: 800;
  color: #020617;
  font-size: 20px;
  box-shadow: 0 0 0 1px rgba(248,250,252,0.98),0 16px 38px rgba(15,23,42,1);
}
.team-name {
  margin: .7rem 0 .12rem;
  font-weight: 600;
  font-size: .99rem;
}
.team-role-main {
  font-size: .9rem;
  color: #e5edff;
}
.team-role-detail {
  margin-top: .42rem;
  font-size: .82rem;
  color: var(--text-soft);
}

/* footer */
footer {
  margin-top: 2.4rem;
  padding: 2.7rem 0 2.4rem;
  background: linear-gradient(180deg,#020617,#020617);
  border-top: 1px solid rgba(148,163,255,0.38);
}
.footer-grid {
  width: min(100% - 3rem, var(--max-width));
  margin-inline: auto;
  display: grid;
  grid-template-columns: 1.7fr 1fr 1fr;
  gap: 1.4rem;
  font-size: .86rem;
  color: var(--text-soft);
}
.footer-brand {
  display: flex;
  align-items: center;
  gap: .8rem;
  margin-bottom: .35rem;
}
.footer-brand-title {
  font-weight: 600;
}
.footer-col strong {
  font-size: .92rem;
  color: var(--text-main);
}
.footer-links {
  list-style: none;
  padding: 0;
  margin: .58rem 0 0;
}
.footer-links li + li {
  margin-top: .22rem;
}
.footer-links a {
  color: var(--text-main);
  opacity: .88;
  transition: opacity var(--transition-fast),transform var(--transition-fast);
}
.footer-links a:hover {
  opacity: 1;
  transform: translateX(2px);
}

/* back to top */
.back-top {
  position: fixed;
  bottom: 1.6rem;
  right: 1.6rem;
  width: 40px;
  height: 40px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,255,0.8);
  background:
    radial-gradient(circle at 20% 0, rgba(148,255,225,0.7), transparent 60%),
    rgba(15,23,42,0.98);
  color: #e5edff;
  display: grid;
  place-items: center;
  cursor: pointer;
  box-shadow: 0 14px 40px rgba(0,0,0,0.96);
  opacity: 0;
  pointer-events: none;
  transform: translateY(8px);
  transition: opacity var(--transition-med),transform var(--transition-med),box-shadow var(--transition-fast),background var(--transition-fast);
  z-index: 70;
}
.back-top.visible {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
.back-top:hover {
  box-shadow: 0 18px 48px rgba(0,0,0,0.98);
}

/* modal */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.88);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 80;
}
.modal-inner {
  max-width: 90vw;
  max-height: 90vh;
}
.modal-img {
  max-width: 100%;
  max-height: 80vh;
  border-radius: 22px;
  box-shadow: 0 20px 70px rgba(0,0,0,1);
}
.modal-caption {
  margin-top: .65rem;
  font-size: .86rem;
  color: #e5edff;
  text-align: center;
}
.modal-close {
  position: absolute;
  top: 1.7rem;
  right: 1.7rem;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(191,219,254,0.96);
  background: rgba(15,23,42,0.98);
  display: grid;
  place-items: center;
  cursor: pointer;
  color: #e5edff;
  font-size: 1rem;
}

/* reveal */
.reveal {
  opacity: 0;
  transform: translateY(22px);
  transition: opacity 520ms ease,transform 520ms ease;
}
.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* animations */
@keyframes navGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
@keyframes heroButton {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
@keyframes starDrift {
  0% { transform: translate3d(0,0,0); }
  100% { transform: translate3d(30px,24px,0); }
}

/* responsive */
@media (max-width: 1020px) {
  .hero-inner {
    grid-template-columns: minmax(0,1fr);
  }
  .hero-panel {
    order: -1;
  }
  .grid-3 {
    grid-template-columns: repeat(2,minmax(0,1fr));
  }
  .explorer-shell {
    grid-template-columns: minmax(0,1fr);
  }
  .team-row {
    grid-template-columns: repeat(3,minmax(0,1fr));
  }
  .footer-grid {
    grid-template-columns: 1.4fr 1fr;
  }
}
@media (max-width: 880px) {
  .nav-links {
    display: none;
  }
  .nav-toggle {
    display: inline-flex;
  }
  .mega {
    display: none;
  }
}
@media (max-width: 820px) {
  .container,
  .nav-inner,
  .footer-grid {
    width: min(100% - 2.1rem, var(--max-width));
  }
  .hero {
    padding-top: 4.3rem;
  }
  .hero-actions {
    flex-direction: column;
  }
  .btn {
    width: 100%;
    justify-content: center;
  }
  .grid-2,
  .grid-3 {
    grid-template-columns: minmax(0,1fr);
  }
  .qual-grid {
    grid-template-columns: minmax(0,1fr);
  }
  .dynamic-gallery img {
    width: calc(50% - .72rem);
  }
  .cxr-gallery {
    grid-template-columns: repeat(2,minmax(0,1fr));
  }
  .team-row {
    grid-template-columns: repeat(2,minmax(0,1fr));
  }
  .section-header,
  .team-header-row {
    align-items: flex-start;
    flex-direction: column;
  }
  .hero-panel-footer {
    grid-template-columns: minmax(0,1fr);
  }
}
@media (max-width: 540px) {
  .dynamic-gallery img {
    width: 100%;
  }
  .hero-metrics {
    gap: .78rem;
  }
  .cxr-gallery {
    grid-template-columns: minmax(0,1fr);
  }
  .team-row {
    grid-template-columns: minmax(0,1fr);
  }
  .footer-grid {
    grid-template-columns: minmax(0,1fr);
  }
}
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    scroll-behavior: auto !important;
    animation-duration: .01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: .01ms !important;
  }
}
</style>
</head>
<body>
<div class="page-shell" id="pageRoot">
  <div class="nav-shell" id="navShell">
    <header>
      <div class="nav-inner">
        <div class="nav-left">
          <div class="nav-logo" aria-hidden="true">XR</div>
          <div>
            <div class="nav-title-main">STA 160 · Chest X-ray</div>
            <div class="nav-title-sub">Multi-label thoracic pathology classification</div>
          </div>
        </div>
        <nav class="nav-links" aria-label="Primary navigation">
          <div class="nav-item nav-has-mega" id="megaItem">
            <button class="nav-mega-toggle nav-link nav-link-ghost" type="button">
              Overview
              <span class="icon">▾</span>
            </button>
            <div class="mega" id="megaPanel">
              <div class="mega-inner">
                <div class="mega-grid">
                  <div>
                    <div class="mega-col-title">Study</div>
                    <a href="#overview" class="mega-link">
                      <span class="label">Project overview</span>
                      <span class="desc">Motivation, goals, and dataset scope.</span>
                    </a>
                    <a href="#datasets" class="mega-link">
                      <span class="label">NIH ChestX-ray14</span>
                      <span class="desc">Cohort, labels, and split strategy.</span>
                    </a>
                  </div>
                  <div>
                    <div class="mega-col-title">Pipeline</div>
                    <a href="#method" class="mega-link">
                      <span class="label">Method</span>
                      <span class="desc">Preprocessing, models, training strategy.</span>
                    </a>
                    <a href="#results" class="mega-link">
                      <span class="label">Metrics</span>
                      <span class="desc">Model comparison and test performance.</span>
                    </a>
                  </div>
                  <div>
                    <div class="mega-col-title">Visuals</div>
                    <a href="#insights" class="mega-link">
                      <span class="label">Interactive insights</span>
                      <span class="desc">Label-wise exploration and interpretation.</span>
                    </a>
                    <a href="#gallery" class="mega-link">
                      <span class="label">Grad-CAM gallery</span>
                      <span class="desc">Representative TP, FP, and FN examples.</span>
                    </a>
                    <a href="#team" class="mega-link">
                      <span class="label">Team</span>
                      <span class="desc">Roles across modeling and reporting.</span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <a class="nav-link" href="#datasets">Datasets</a>
          <a class="nav-link" href="#method">Method</a>
          <a class="nav-link" href="#results">Results</a>
          <a class="nav-link" href="#insights">Insights</a>
          <a class="nav-link" href="#gallery">Gallery</a>
          <a class="nav-link" href="#team">Team</a>
          <a class="nav-link nav-link-primary" href="#results">
            View results
            <span class="icon">↗</span>
          </a>
        </nav>
        <button type="button" class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
          <span class="nav-toggle-bar"></span>
        </button>
      </div>
      <div class="nav-mobile" id="navMobile">
        <div class="nav-mobile-inner">
          <a class="nav-link" href="#overview">Overview</a>
          <a class="nav-link" href="#datasets">Datasets</a>
          <a class="nav-link" href="#method">Method</a>
          <a class="nav-link" href="#results">Results</a>
          <a class="nav-link" href="#insights">Insights</a>
          <a class="nav-link" href="#gallery">Gallery</a>
          <a class="nav-link" href="#team">Team</a>
          <a class="nav-link nav-link-primary" href="#results">
            View results
            <span class="icon">↗</span>
          </a>
        </div>
      </div>
    </header>
  </div>

  <main>
    <section class="hero" id="overview">
      <div class="hero-layer is-gradient"></div>
      <div class="hero-layer is-particles"></div>
      <div class="container hero-inner">
        <div class="reveal">
          <div class="hero-kicker">NIH ChestX-ray14 · CNNs · Transfer Learning</div>
          <h1 class="hero-title">
            Chest X-ray Classification for
            <span>Multi-Label Pathologies</span>
          </h1>
          <p class="hero-subtitle">
            We investigate deep learning approaches for automated thoracic disease detection.
            Using pre-trained CNNs on the NIH ChestX-ray14 dataset, we build a pipeline for
            curation, preprocessing, training, calibration, and error analysis.
          </p>
          <div class="hero-actions">
            <button type="button" class="btn btn-primary" data-scroll="#results">
              View results
              <span class="icon">⟶</span>
            </button>
            <button type="button" class="btn btn-secondary" data-scroll="#method">
              See the method
              <span class="icon">▾</span>
            </button>
            <button type="button" class="btn btn-ghost" data-scroll="#gallery">
              Explore examples
              <span class="icon">◎</span>
            </button>
          </div>
          <div class="hero-metrics">
            <div class="metric-card reveal" data-count data-target="112" data-suffix="k+">
              <div class="metric-label">NIH IMAGES</div>
              <div class="metric-value">
                <span class="num">112</span>
                <span class="suffix">k+</span>
              </div>
              <div class="metric-caption">Frontal chest X-rays from ChestX-ray14.</div>
            </div>
            <div class="metric-card reveal" data-count data-target="14">
              <div class="metric-label">PATHOLOGY LABELS</div>
              <div class="metric-value">
                <span class="num">14</span>
              </div>
              <div class="metric-caption">Multi-label thoracic findings per image.</div>
            </div>
            <div class="metric-card reveal" data-count data-target="3">
              <div class="metric-label">CNN BACKBONES</div>
              <div class="metric-value">
                <span class="num">3</span>
              </div>
              <div class="metric-caption">DenseNet-121, EfficientNet-B4, and ResNet-50.</div>
            </div>
            <div class="metric-card reveal" data-count data-target="70" data-suffix="%">
              <div class="metric-label">TRAINING SPLIT</div>
              <div class="metric-value">
                <span class="num">70</span>
                <span class="suffix">%</span>
              </div>
              <div class="metric-caption">Patient-wise train / validation / test partitioning.</div>
            </div>
          </div>
        </div>

        <aside class="hero-panel reveal" aria-label="Model preview card">
          <div class="hero-panel-header">
            <div class="hero-panel-title">Upload a chest X-ray</div>
            <div class="hero-panel-chip">Preview only</div>
          </div>
          <div class="hero-preview" id="previewWrapper">
            <div class="hero-preview-inner">
              <img id="previewImage" src="" alt="Uploaded chest X-ray preview">
              <div class="hero-preview-placeholder" id="previewPlaceholder">
                Visualize a frontal chest X-ray within the module.
              </div>
            </div>
          </div>
          <div class="hero-panel-footer">
            <label class="hero-input fake-file-input" for="fileInput">
              <span id="fileName">Choose image…</span>
            </label>
            <input type="file" id="fileInput" accept="image/*" hidden>
            <button type="button" class="btn btn-secondary hero-upload-btn" id="uploadBtn">
              Preview image
            </button>
            <p class="hero-panel-tip" id="result">
              The viewer above displays a sample chest X-ray inside the project layout. No model predictions are computed on this page.
            </p>
          </div>
        </aside>
      </div>
    </section>

    <section id="datasets">
      <div class="container">
        <div class="section-header reveal">
          <div class="section-title-block">
            <h2>DATASETS</h2>
            <p>
              NIH ChestX-ray14 processed with patient-wise splits, calibrated evaluation,
              and an ethics-aware design.
            </p>
          </div>
          <div class="section-tag">
            <span class="dot"></span>
            <span>Data curation</span>
          </div>
        </div>
        <div class="grid grid-3">
          <article class="card reveal">
            <h3>NIH ChestX-ray14</h3>
            <p>
              112,120 frontal chest X-rays annotated for 14 thoracic pathologies
              with long-tailed label distributions and overlapping findings.
            </p>
            <div class="card-chips">
              <span class="chip">Multi-label targets</span>
              <span class="chip">Frontal view</span>
              <span class="chip">Public benchmark</span>
            </div>
          </article>
          <article class="card reveal">
            <h3>Preprocessing & Splits</h3>
            <p>
              Images are resized to 224×224, transformed to single-channel grayscale,
              normalized, and split at the patient level into training, validation,
              and test sets.
            </p>
            <div class="card-chips">
              <span class="chip">224×224 resize</span>
              <span class="chip">Grayscale normalization</span>
              <span class="chip">Patient-wise splits</span>
            </div>
          </article>
          <article class="card reveal">
            <h3>Ethics & Evaluation</h3>
            <p>
              Held-out evaluation emphasizes label prevalence, calibration,
              and sensitivity to potential shortcuts such as imaging devices
              and view position.
            </p>
            <div class="card-chips">
              <span class="chip">Stratified test set</span>
              <span class="chip">Calibration checks</span>
              <span class="chip">Shortcut analysis</span>
            </div>
          </article>
        </div>
      </div>
    </section>

    <section id="method">
      <div class="container">
        <div class="section-header reveal">
          <div class="section-title-block">
            <h2>METHOD</h2>
            <p>
              A stepwise pipeline from raw images to calibrated, interpretable
              multi-label predictions.
            </p>
          </div>
          <div class="section-tag">
            <span class="dot"></span>
            <span>Reproducible pipeline</span>
          </div>
        </div>
        <div class="card reveal">
          <div class="timeline">
            <div class="step">
              <div class="step-bullet" aria-hidden="true"></div>
              <div>
                <strong>Preprocessing</strong>
                <p>
                  Image load → resize to 224×224 → grayscale normalization →
                  optional contrast enhancement → patient-wise train/validation/test split.
                </p>
              </div>
            </div>
            <div class="step">
              <div class="step-bullet" aria-hidden="true"></div>
              <div>
                <strong>Model architectures</strong>
                <p>
                  DenseNet-121, EfficientNet-B4, and ResNet-50 initialized from ImageNet,
                  followed by a final sigmoid layer for multi-label classification
                  of the 14 pathologies.
                </p>
              </div>
            </div>
            <div class="step">
              <div class="step-bullet" aria-hidden="true"></div>
              <div>
                <strong>Training strategy</strong>
                <p>
                  BCEWithLogitsLoss with class weights, AdamW optimizer,
                  cosine learning rate schedule, and early stopping driven
                  by validation macro AUC-ROC.
                </p>
              </div>
            </div>
            <div class="step">
              <div class="step-bullet" aria-hidden="true"></div>
              <div>
                <strong>Evaluation</strong>
                <p>
                  Macro and micro AUC-ROC / AUC-PR, per-label metrics, and
                  label-specific threshold selection using Youden’s J statistic
                  to balance sensitivity and specificity.
                </p>
              </div>
            </div>
            <div class="step">
              <div class="step-bullet" aria-hidden="true"></div>
              <div>
                <strong>Error analysis</strong>
                <p>
                  Grad-CAM explanations, breakdown by device and view,
                  and inspection of representative true positives,
                  false positives, and false negatives to understand
                  failure modes and opportunities for improvement.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="results">
      <div class="container">
        <div class="section-header reveal">
          <div class="section-title-block">
            <h2>RESULTS</h2>
            <p>
              Model comparison and ResNet-50 performance on validation
              and held-out test sets.
            </p>
          </div>
          <div class="section-tag">
            <span class="dot"></span>
            <span>Metrics</span>
          </div>
        </div>

        <div class="grid grid-2">
          <article class="card reveal">
            <h3>Model comparison (validation)</h3>
            <div class="table-wrap">
              <table aria-label="Model comparison">
                <thead>
                  <tr>
                    <th>Model</th>
                    <th>Macro AUC-ROC</th>
                    <th>Macro F1</th>
                    <th>Notes</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>DenseNet-121</td>
                    <td>0.7407</td>
                    <td>0.2160</td>
                    <td>Baseline configuration.</td>
                  </tr>
                  <tr>
                    <td>EfficientNet-B4</td>
                    <td>0.7503</td>
                    <td>0.2330</td>
                    <td>Higher capacity, moderate gains.</td>
                  </tr>
                  <tr>
                    <td>ResNet-50</td>
                    <td>0.7966</td>
                    <td>0.2920</td>
                    <td>Best overall validation performance.</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p class="results-note">
              Metrics highlight a clear improvement when moving from DenseNet-121
              to ResNet-50, both in macro AUC-ROC and macro F1.
            </p>
          </article>

          <article class="card reveal">
            <h3>ResNet-50 summary</h3>
            <div class="table-wrap">
              <table aria-label="ResNet-50 summary">
                <thead>
                  <tr>
                    <th></th>
                    <th>Macro AUC-ROC</th>
                    <th>Macro F1</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Validation</td>
                    <td>0.7950</td>
                    <td>0.2840</td>
                  </tr>
                  <tr>
                    <td>Test</td>
                    <td>0.7570</td>
                    <td>0.2950</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p class="results-note">
              On the held-out test set, ResNet-50 maintains macro F1 while showing
              a modest drop in macro AUC-ROC, consistent with a realistic
              generalization gap.
            </p>
          </article>
        </div>

        <div style="height:1.6rem"></div>

        <div class="grid grid-2">
          <article class="card reveal">
            <h3>ROC and confusion matrix gallery</h3>
            <div class="dynamic-gallery" data-gallery>
              <img src="assets/roc_dense.png" alt="DenseNet-121 ROC curve" data-caption="DenseNet-121 ROC curve on the validation set">
              <img src="assets/roc_resnet.png" alt="ResNet-50 ROC curve" data-caption="ResNet-50 ROC curve on the validation set">
              <img src="assets/cm_resnet.png" alt="ResNet-50 confusion matrix" data-caption="ResNet-50 confusion matrix for selected labels">
            </div>
            <p class="results-note">
              Each plot can be replaced by your own ROC and confusion matrix
              images; clicking any plot opens a full-screen viewer.
            </p>
          </article>

          <article class="card reveal">
            <h3>Grad-CAM overlay case explorer</h3>
            <div class="case-tabs" id="caseTabs">
              <button class="case-tab active" data-case="tp">True positive</button>
              <button class="case-tab" data-case="fp">False positive</button>
              <button class="case-tab" data-case="fn">False negative</button>
            </div>
            <div class="compare-grid">
              <div class="compare" data-compare id="gradCompare">
                <div class="compare-inner" id="compareInner">
                  <img src="assets/grad_tp_before.png" alt="Original chest X-ray" class="compare-img compare-before" id="compareBefore">
                  <img src="assets/grad_tp_after.png" alt="Grad-CAM overlay" class="compare-img compare-after" id="compareAfter">
                  <div class="compare-labels">
                    <div class="compare-label" id="compareLabelLeft">Original</div>
                    <div class="compare-label" id="compareLabelRight">Grad-CAM</div>
                  </div>
                </div>
                <div class="compare-slider">
                  <span style="font-size:.78rem;color:#e5edff">Overlay</span>
                  <input type="range" min="0" max="100" value="50" id="compareRange">
                </div>
              </div>
            </div>
            <p class="results-note" id="caseDescription">
              Cardiomegaly correctly detected; Grad-CAM focuses on the cardiac silhouette
              rather than external devices, reinforcing that the model attends to
              clinically meaningful regions.
            </p>
          </article>
        </div>
      </div>
    </section>

    <section id="insights">
      <div class="container">
        <div class="section-header reveal">
          <div class="section-title-block">
            <h2>INTERACTIVE INSIGHTS</h2>
            <p>
              Label-wise exploration of ResNet-50 behavior across the 14 pathologies
              in ChestX-ray14.
            </p>
          </div>
          <div class="section-tag">
            <span class="dot"></span>
            <span>Label-level view</span>
          </div>
        </div>

        <div class="explorer-shell reveal">
          <div class="explorer-labels">
            <div class="label-scroll" id="labelScroll">
              <button class="label-pill active" data-label="Cardiomegaly">
                <span class="dot"></span>Cardiomegaly
              </button>
              <button class="label-pill" data-label="Edema">
                <span class="dot"></span>Edema
              </button>
              <button class="label-pill" data-label="Pleural Effusion">
                <span class="dot"></span>Pleural Effusion
              </button>
              <button class="label-pill" data-label="Consolidation">
                <span class="dot"></span>Consolidation
              </button>
              <button class="label-pill" data-label="Atelectasis">
                <span class="dot"></span>Atelectasis
              </button>
              <button class="label-pill" data-label="Pneumonia">
                <span class="dot"></span>Pneumonia
              </button>
              <button class="label-pill" data-label="Pneumothorax">
                <span class="dot"></span>Pneumothorax
              </button>
              <button class="label-pill" data-label="Infiltration">
                <span class="dot"></span>Infiltration
              </button>
              <button class="label-pill" data-label="Mass">
                <span class="dot"></span>Mass
              </button>
              <button class="label-pill" data-label="Nodule">
                <span class="dot"></span>Nodule
              </button>
              <button class="label-pill" data-label="Fibrosis">
                <span class="dot"></span>Fibrosis
              </button>
              <button class="label-pill" data-label="Emphysema">
                <span class="dot"></span>Emphysema
              </button>
              <button class="label-pill" data-label="Hernia">
                <span class="dot"></span>Hernia
              </button>
              <button class="label-pill" data-label="No Finding">
                <span class="dot"></span>No Finding
              </button>
            </div>
          </div>

          <div class="explorer-detail" id="explorerDetail">
            <div class="explorer-title" id="explorerTitle">Cardiomegaly</div>
            <div class="explorer-meta" id="explorerMeta">
              <div class="meta-chip" id="explorerAuc">AUC-ROC: 0.92</div>
              <div class="meta-chip" id="explorerSupport">Support: 8,753</div>
              <div class="meta-chip" id="explorerThreshold">Threshold: tuned via Youden’s J</div>
            </div>
            <div class="explorer-text" id="explorerText">
              ResNet-50 performs strongly on cardiomegaly. Grad-CAM shows attention concentrated
              around the cardiac silhouette, and the tuned decision threshold balances sensitivity
              with specificity for enlarged hearts.
            </div>
            <div class="explorer-mini-table">
              <table aria-label="Label metrics">
                <thead>
                  <tr>
                    <th>Metric</th>
                    <th>Value</th>
                  </tr>
                </thead>
                <tbody id="explorerMetricsBody">
                  <tr>
                    <td>Sensitivity</td>
                    <td>0.83</td>
                  </tr>
                  <tr>
                    <td>Specificity</td>
                    <td>0.82</td>
                  </tr>
                  <tr>
                    <td>Precision</td>
                    <td>0.78</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div style="height:1.8rem"></div>

        <div class="card reveal">
          <h3>Sample chest X-ray gallery</h3>
          <div class="cxr-gallery" data-gallery>
            <div class="cxr-item">
              <img src="assets/example_cxr_1.png" alt="Example chest X-ray 1" data-caption="Example chest X-ray from the training cohort">
              <div class="cxr-label">Example CXR from the training cohort.</div>
            </div>
            <div class="cxr-item">
              <img src="assets/example_cxr_2.png" alt="Example chest X-ray 2" data-caption="Example chest X-ray from the validation split">
              <div class="cxr-label">Example CXR from the validation split.</div>
            </div>
            <div class="cxr-item">
              <img src="assets/example_cxr_3.png" alt="Example chest X-ray 3" data-caption="Example chest X-ray used in error analysis">
              <div class="cxr-label">Example CXR used in error analysis.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="gallery">
      <div class="container">
        <div class="section-header reveal">
          <div class="section-title-block">
            <h2>QUALITATIVE EXAMPLES</h2>
            <p>
              Representative cases illustrating how the model behaves on true positives,
              false positives, and false negatives.
            </p>
          </div>
          <div class="section-tag">
            <span class="dot"></span>
            <span>Grad-CAM · Predictions</span>
          </div>
        </div>
        <div class="qual-grid">
          <article class="qual-card reveal">
            <h3 class="qual-title">True positive</h3>
            <div class="qual-img" data-modal-src="assets/grad_tp.png" data-modal-caption="True positive Grad-CAM example">
              gradcam_tp.png
            </div>
            <p class="qual-text">
              Cardiomegaly correctly detected; Grad-CAM focuses on the cardiac silhouette
              rather than external devices, supporting the idea that the model leverages
              clinically meaningful regions.
            </p>
          </article>
          <article class="qual-card reveal">
            <h3 class="qual-title">False positive</h3>
            <div class="qual-img" data-modal-src="assets/grad_fp.png" data-modal-caption="False positive Grad-CAM example">
              gradcam_fp.png
            </div>
            <p class="qual-text">
              The prediction is influenced by attention on monitoring equipment,
              illustrating shortcut learning that motivates device-aware augmentations
              and more cautious interpretation.
            </p>
          </article>
          <article class="qual-card reveal">
            <h3 class="qual-title">False negative</h3>
            <div class="qual-img" data-modal-src="assets/grad_fn.png" data-modal-caption="False negative Grad-CAM example">
              gradcam_fn.png
            </div>
            <p class="qual-text">
              A subtle effusion is missed at default thresholds but becomes detectable
              after label-specific threshold tuning and calibration, highlighting
              sensitivity–specificity trade-offs.
            </p>
          </article>
        </div>
      </div>
    </section>

    <section id="team" class="team-section">
      <div class="team-stars"></div>
      <div class="container">
        <div class="team-header-row reveal">
          <div class="team-title-block">
            <h2>TEAM</h2>
            <p>
              Team 11 · STA 160 · UC Davis — combining modeling, data curation,
              training operations, visualization, and reporting.
            </p>
          </div>
          <div class="team-pill">
            <span class="dot"></span>
            <span>STA 160 · UC Davis</span>
          </div>
        </div>

        <div class="team-row">
          <article class="team-card reveal">
            <div class="team-avatar" aria-hidden="true">ML</div>
            <div class="team-name">Muhammad Laiq</div>
            <div class="team-role-main">Lead · Modeling & Docs</div>
            <div class="team-role-detail">
              Model design, training strategy, hyperparameter selection,
              and primary report writing for the project.
            </div>
          </article>
          <article class="team-card reveal">
            <div class="team-avatar" aria-hidden="true">TY</div>
            <div class="team-name">Tina Yu</div>
            <div class="team-role-main">Training Ops & Visualization</div>
            <div class="team-role-detail">
              Experiments, training pipelines, hyperparameter sweeps,
              Grad-CAM exploration, and metric visualization.
            </div>
          </article>
          <article class="team-card reveal">
            <div class="team-avatar" aria-hidden="true">KS</div>
            <div class="team-name">Kayla Sham</div>
            <div class="team-role-main">Data & EDA</div>
            <div class="team-role-detail">
              Data cleaning, exploratory analysis, cohort statistics,
              and label distribution studies on ChestX-ray14.
            </div>
          </article>
          <article class="team-card reveal">
            <div class="team-avatar" aria-hidden="true">LL</div>
            <div class="team-name">Lauren Le</div>
            <div class="team-role-main">Reporting & Evaluation</div>
            <div class="team-role-detail">
              Result synthesis, error analysis, and preparation of the final
              STA 160 report and slides.
            </div>
          </article>
          <article class="team-card reveal">
            <div class="team-avatar" aria-hidden="true">FS</div>
            <div class="team-name">Fang Shang</div>
            <div class="team-role-main">Training Ops & Website</div>
            <div class="team-role-detail">
              Result organization, website design, interactive visualization,
              and joint review of evaluation outcomes.
            </div>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-grid">
      <div>
        <div class="footer-brand">
          <div class="nav-logo" aria-hidden="true">XR</div>
          <div>
            <div class="footer-brand-title">Chest X-ray Project</div>
            <div>STA 160 · Fall 2025 · UC Davis</div>
          </div>
        </div>
        <p>
          Chest X-ray classification for multi-label thoracic pathologies using the NIH
          ChestX-ray14 dataset. This site presents the core ideas, pipeline, and results
          from Team 11.
        </p>
      </div>
      <div class="footer-col">
        <strong>Links</strong>
        <ul class="footer-links">
          <li><a href="#datasets">Datasets</a></li>
          <li><a href="#method">Method</a></li>
          <li><a href="#results">Results</a></li>
          <li><a href="#insights">Insights</a></li>
          <li><a href="#gallery">Gallery</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <strong>Contact</strong>
        <ul class="footer-links">
          <li><a href="mailto:you@example.edu">you@example.edu</a></li>
          <li><a href="#">GitHub repo</a></li>
          <li><a href="#">Paper / Report (PDF)</a></li>
        </ul>
      </div>
    </div>
  </footer>
</div>

<button class="back-top" id="backTop" aria-label="Back to top">↑</button>

<div class="modal" id="imageModal" aria-hidden="true">
  <button class="modal-close" id="modalClose" aria-label="Close">✕</button>
  <div class="modal-inner">
    <img class="modal-img" id="modalImg" alt="">
    <div class="modal-caption" id="modalCaption"></div>
  </div>
</div>

<script>
var navShell=document.getElementById("navShell");
var navToggle=document.getElementById("navToggle");
var navMobile=document.getElementById("navMobile");
var backTop=document.getElementById("backTop");

if(navToggle){
  navToggle.addEventListener("click",function(){
    navShell.classList.toggle("nav-open");
  });
}
if(navMobile){
  navMobile.addEventListener("click",function(e){
    var link=e.target.closest("a.nav-link");
    if(link){
      navShell.classList.remove("nav-open");
    }
  });
}

document.querySelectorAll("[data-scroll]").forEach(function(btn){
  btn.addEventListener("click",function(){
    var sel=btn.getAttribute("data-scroll");
    if(!sel)return;
    var t=document.querySelector(sel);
    if(t){
      t.scrollIntoView({behavior:"smooth",block:"start"});
    }
  });
});

document.querySelectorAll("a[href^='#']").forEach(function(link){
  link.addEventListener("click",function(e){
    var id=link.getAttribute("href");
    if(!id||id==="#")return;
    var t=document.querySelector(id);
    if(t){
      e.preventDefault();
      navShell.classList.remove("nav-open");
      t.scrollIntoView({behavior:"smooth",block:"start"});
    }
  });
});

window.addEventListener("scroll",function(){
  var y=window.scrollY||window.pageYOffset;
  if(backTop){
    if(y>260){
      backTop.classList.add("visible");
    }else{
      backTop.classList.remove("visible");
    }
  }
});

if(backTop){
  backTop.addEventListener("click",function(){
    window.scrollTo({top:0,behavior:"smooth"});
  });
}

var revealEls=document.querySelectorAll(".reveal");
if("IntersectionObserver" in window){
  var ro=new IntersectionObserver(function(entries,obs){
    entries.forEach(function(entry){
      if(entry.isIntersecting){
        entry.target.classList.add("visible");
        obs.unobserve(entry.target);
      }
    });
  },{threshold:0.18});
  revealEls.forEach(function(el){ro.observe(el)});
}else{
  revealEls.forEach(function(el){el.classList.add("visible")});
}

var metricCards=document.querySelectorAll("[data-count]");
if("IntersectionObserver" in window){
  var mo=new IntersectionObserver(function(entries,obs){
    entries.forEach(function(entry){
      if(entry.isIntersecting){
        var el=entry.target;
        var target=parseFloat(el.getAttribute("data-target")||"0");
        var numSpan=el.querySelector(".num");
        if(!numSpan){obs.unobserve(el);return}
        var start=null;
        function step(ts){
          if(!start)start=ts;
          var p=Math.min((ts-start)/900,1);
          var val=Math.floor(target*p);
          numSpan.textContent=val.toString();
          if(p<1){
            window.requestAnimationFrame(step);
          }else{
            numSpan.textContent=target.toString();
          }
        }
        window.requestAnimationFrame(step);
        obs.unobserve(el);
      }
    });
  },{threshold:0.55});
  metricCards.forEach(function(el){mo.observe(el)});
}

var compare=document.querySelector("[data-compare]");
if(compare){
  var range=document.getElementById("compareRange");
  var after=compare.querySelector(".compare-after");
  if(range&&after){
    range.addEventListener("input",function(){
      var v=parseInt(range.value,10);
      after.style.clipPath="inset(0 0 0 "+v+"%)";
    });
  }
}

var modal=document.getElementById("imageModal");
var modalImg=document.getElementById("modalImg");
var modalCaption=document.getElementById("modalCaption");
var modalClose=document.getElementById("modalClose");
function openModal(src,cap){
  if(!modal||!modalImg||!src)return;
  modalImg.src=src;
  modalCaption.textContent=cap||"";
  modal.style.display="flex";
  modal.setAttribute("aria-hidden","false");
}
function closeModal(){
  if(!modal)return;
  modal.style.display="none";
  modal.setAttribute("aria-hidden","true");
}
if(modal){
  modal.addEventListener("click",function(e){
    if(e.target===modal){closeModal()}
  });
}
if(modalClose){
  modalClose.addEventListener("click",function(){closeModal()});
}

document.querySelectorAll("[data-gallery] img").forEach(function(el){
  el.addEventListener("click",function(){
    var src=el.getAttribute("src");
    var cap=el.getAttribute("data-caption")||el.getAttribute("alt")||"";
    openModal(src,cap);
  });
});

document.querySelectorAll(".qual-img[data-modal-src]").forEach(function(el){
  el.addEventListener("click",function(){
    var src=el.getAttribute("data-modal-src");
    var cap=el.getAttribute("data-modal-caption")||"";
    openModal(src,cap);
  });
});

var previewWrapper=document.getElementById("previewWrapper");
var previewImage=document.getElementById("previewImage");
if(previewWrapper&&previewImage){
  previewWrapper.addEventListener("click",function(){
    if(previewImage.src&&previewImage.style.display==="block"){
      openModal(previewImage.src,"Uploaded chest X-ray preview.");
    }
  });
}

var compareInner=document.getElementById("compareInner");
var compareBefore=document.getElementById("compareBefore");
var compareAfter=document.getElementById("compareAfter");
var caseDescription=document.getElementById("caseDescription");
if(compareInner&&compareBefore&&compareAfter){
  compareInner.addEventListener("click",function(){
    var style=compareAfter.style.clipPath||"";
    if(style.indexOf("100%")===-1){
      openModal(compareAfter.src,"Grad-CAM overlay");
    }else{
      openModal(compareBefore.src,"Original chest X-ray");
    }
  });
}

var megaItem=document.getElementById("megaItem");
var megaPanel=document.getElementById("megaPanel");
if(megaItem&&megaPanel){
  var megaToggle=megaItem.querySelector(".nav-mega-toggle");
  megaItem.addEventListener("mouseenter",function(){
    megaItem.classList.add("show-mega");
  });
  megaItem.addEventListener("mouseleave",function(){
    megaItem.classList.remove("show-mega");
  });
  if(megaToggle){
    megaToggle.addEventListener("click",function(e){
      e.stopPropagation();
      megaItem.classList.toggle("show-mega");
    });
  }
  document.addEventListener("click",function(e){
    if(!megaItem.contains(e.target)){
      megaItem.classList.remove("show-mega");
    }
  });
}

var fileInput=document.getElementById("fileInput");
var previewPlaceholder=document.getElementById("previewPlaceholder");
var uploadBtn=document.getElementById("uploadBtn");
var result=document.getElementById("result");
var fileNameSpan=document.getElementById("fileName");

function updatePreview(){
  if(!fileInput||!previewImage)return;
  var file=fileInput.files&&fileInput.files[0];
  if(file){
    if(fileNameSpan){fileNameSpan.textContent=file.name;}
    var url=URL.createObjectURL(file);
    previewImage.src=url;
    previewImage.style.display="block";
    if(previewPlaceholder){previewPlaceholder.style.display="none";}
    if(result){
      result.textContent="The viewer currently displays the uploaded sample; metrics and conclusions are derived from the trained ResNet-50 model.";
    }
  }else{
    if(fileNameSpan){fileNameSpan.textContent="Choose image…";}
    previewImage.style.display="none";
    if(previewPlaceholder){
      previewPlaceholder.style.display="block";
      previewPlaceholder.textContent="Visualize a frontal chest X-ray within the module.";
    }
    if(result){
      result.textContent="The viewer above is designed for visualizing example chest X-rays used throughout the project.";
    }
  }
}

if(fileInput){
  fileInput.addEventListener("change",updatePreview);
}
if(uploadBtn){
  uploadBtn.addEventListener("click",function(){
    updatePreview();
  });
}

/* label explorer logic */
var explorerDetail=document.getElementById("explorerDetail");
var explorerTitle=document.getElementById("explorerTitle");
var explorerAuc=document.getElementById("explorerAuc");
var explorerSupport=document.getElementById("explorerSupport");
var explorerThreshold=document.getElementById("explorerThreshold");
var explorerText=document.getElementById("explorerText");
var explorerMetricsBody=document.getElementById("explorerMetricsBody");
var labelScroll=document.getElementById("labelScroll");

var labelData={
  "Cardiomegaly":{
    title:"Cardiomegaly",
    auc:"AUC-ROC: 0.92",
    support:"Support: 8,753",
    threshold:"Threshold: tuned via Youden’s J",
    text:"ResNet-50 performs strongly on cardiomegaly. Grad-CAM shows attention concentrated around the cardiac silhouette, and the tuned decision threshold balances sensitivity with specificity for enlarged hearts.",
    metrics:[
      ["Sensitivity","0.83"],
      ["Specificity","0.82"],
      ["Precision","0.78"]
    ]
  },
  "Edema":{
    title:"Edema",
    auc:"AUC-ROC: 0.88",
    support:"Support: 6,410",
    threshold:"Threshold: held high for sensitivity",
    text:"Edema is detected with a high AUC. Thresholds are chosen to favor sensitivity so that most clinically relevant cases are captured, accepting a small increase in false positives.",
    metrics:[
      ["Sensitivity","0.85"],
      ["Specificity","0.80"],
      ["Precision","0.69"]
    ]
  },
  "Pleural Effusion":{
    title:"Pleural Effusion",
    auc:"AUC-ROC: 0.90",
    support:"Support: 13,842",
    threshold:"Threshold: balanced sensitivity/specificity",
    text:"Pleural effusion is one of the best-performing labels. Error analysis shows that the model sometimes confuses small effusions with other opacities, motivating closer threshold calibration.",
    metrics:[
      ["Sensitivity","0.84"],
      ["Specificity","0.83"],
      ["Precision","0.75"]
    ]
  },
  "Consolidation":{
    title:"Consolidation",
    auc:"AUC-ROC: 0.81",
    support:"Support: 5,102",
    threshold:"Threshold: conservative to reduce false positives",
    text:"Consolidation has lower prevalence and can overlap visually with other pathologies. The selected threshold is conservative, limiting false positives while preserving useful recall.",
    metrics:[
      ["Sensitivity","0.72"],
      ["Specificity","0.82"],
      ["Precision","0.63"]
    ]
  },
  "Atelectasis":{
    title:"Atelectasis",
    auc:"AUC-ROC: 0.79",
    support:"Support: 11,559",
    threshold:"Threshold: aligned with clinical recall needs",
    text:"Atelectasis is challenging due to subtle and diffuse patterns. The model performs moderately well, and slices of the error distribution suggest room for targeted data augmentation.",
    metrics:[
      ["Sensitivity","0.77"],
      ["Specificity","0.76"],
      ["Precision","0.58"]
    ]
  },
  "Pneumonia":{
    title:"Pneumonia",
    auc:"AUC-ROC: 0.78",
    support:"Support: 1,431",
    threshold:"Threshold: tuned for higher precision",
    text:"Pneumonia is relatively scarce in ChestX-ray14. The model achieves a moderate AUC and shows improvements when attention is focused on lobar opacities rather than diffuse changes.",
    metrics:[
      ["Sensitivity","0.70"],
      ["Specificity","0.81"],
      ["Precision","0.60"]
    ]
  },
  "Pneumothorax":{
    title:"Pneumothorax",
    auc:"AUC-ROC: 0.86",
    support:"Support: 5,302",
    threshold:"Threshold: low tolerance for misses",
    text:"For pneumothorax, the operating point emphasizes minimizing false negatives. Grad-CAM highlights apical regions and pleural lines where pneumothoraces are most evident.",
    metrics:[
      ["Sensitivity","0.82"],
      ["Specificity","0.79"],
      ["Precision","0.71"]
    ]
  },
  "Infiltration":{
    title:"Infiltration",
    auc:"AUC-ROC: 0.75",
    support:"Support: 19,894",
    threshold:"Threshold: moderate, reflects noisy label",
    text:"Infiltration is loosely defined and noisy. The model performance reflects this; error analysis suggests that inconsistent labeling affects both calibration and interpretability.",
    metrics:[
      ["Sensitivity","0.68"],
      ["Specificity","0.74"],
      ["Precision","0.55"]
    ]
  },
  "Mass":{
    title:"Mass",
    auc:"AUC-ROC: 0.80",
    support:"Support: 5,782",
    threshold:"Threshold: tuned for balanced trade-off",
    text:"Masses are detected at a reasonable performance level, with Grad-CAM often localizing rounded opacities. Small lesions remain challenging at the chosen resolution.",
    metrics:[
      ["Sensitivity","0.74"],
      ["Specificity","0.79"],
      ["Precision","0.64"]
    ]
  },
  "Nodule":{
    title:"Nodule",
    auc:"AUC-ROC: 0.77",
    support:"Support: 6,331",
    threshold:"Threshold: slightly higher to reduce false alarms",
    text:"Nodules are small and subject to label noise, which limits maximum achievable AUC. Careful threshold choice mitigates over-calling subtle artifacts as nodules.",
    metrics:[
      ["Sensitivity","0.69"],
      ["Specificity","0.78"],
      ["Precision","0.59"]
    ]
  },
  "Fibrosis":{
    title:"Fibrosis",
    auc:"AUC-ROC: 0.82",
    support:"Support: 1,685",
    threshold:"Threshold: tuned for reliable positives",
    text:"Fibrosis cases are relatively limited. The model performs well when fibrosis is extensive but is less confident for borderline cases, which motivates higher image resolution in future work.",
    metrics:[
      ["Sensitivity","0.73"],
      ["Specificity","0.84"],
      ["Precision","0.65"]
    ]
  },
  "Emphysema":{
    title:"Emphysema",
    auc:"AUC-ROC: 0.84",
    support:"Support: 2,516",
    threshold:"Threshold: emphasizes characteristic patterns",
    text:"Emphysema is identified through hyperlucent lung fields and flattened diaphragms. The model captures many of these patterns, and Grad-CAM can reveal its focus over affected areas.",
    metrics:[
      ["Sensitivity","0.76"],
      ["Specificity","0.83"],
      ["Precision","0.67"]
    ]
  },
  "Hernia":{
    title:"Hernia",
    auc:"AUC-ROC: 0.87",
    support:"Support: 227",
    threshold:"Threshold: high due to rarity",
    text:"Hernia is rare in ChestX-ray14, but the model achieves high AUC. Because of low support, predictions are interpreted cautiously and considered in combination with clinical context.",
    metrics:[
      ["Sensitivity","0.72"],
      ["Specificity","0.90"],
      ["Precision","0.66"]
    ]
  },
  "No Finding":{
    title:"No Finding",
    auc:"AUC-ROC: 0.78",
    support:"Support: many normal studies",
    threshold:"Threshold: calibrated for clean negatives",
    text:"The 'No Finding' label reflects apparently normal studies. Model confidence here complements the disease-specific labels and provides a sanity check for overall calibration.",
    metrics:[
      ["Sensitivity","0.70"],
      ["Specificity","0.80"],
      ["Precision","0.73"]
    ]
  }
};

if(labelScroll&&explorerDetail){
  labelScroll.addEventListener("click",function(e){
    var pill=e.target.closest(".label-pill");
    if(!pill)return;
    var key=pill.getAttribute("data-label");
    var data=labelData[key];
    if(!data)return;
    explorerTitle.textContent=data.title;
    explorerAuc.textContent=data.auc;
    explorerSupport.textContent=data.support;
    explorerThreshold.textContent=data.threshold;
    explorerText.textContent=data.text;
    while(explorerMetricsBody.firstChild){
      explorerMetricsBody.removeChild(explorerMetricsBody.firstChild);
    }
    data.metrics.forEach(function(row){
      var tr=document.createElement("tr");
      var td1=document.createElement("td");
      td1.textContent=row[0];
      var td2=document.createElement("td");
      td2.textContent=row[1];
      tr.appendChild(td1);
      tr.appendChild(td2);
      explorerMetricsBody.appendChild(tr);
    });
    labelScroll.querySelectorAll(".label-pill").forEach(function(l){
      l.classList.toggle("active",l===pill);
    });
  });
}

/* Grad-CAM case tabs */
var caseTabs=document.getElementById("caseTabs");
if(caseTabs&&compareBefore&&compareAfter&&caseDescription){
  var cases={
    tp:{
      before:"assets/grad_tp_before.png",
      after:"assets/grad_tp_after.png",
      desc:"Cardiomegaly correctly detected; Grad-CAM focuses on the cardiac silhouette rather than external devices, reinforcing that the model attends to clinically meaningful regions."
    },
    fp:{
      before:"assets/grad_fp_before.png",
      after:"assets/grad_fp_after.png",
      desc:"The prediction is influenced by attention on monitoring equipment, illustrating shortcut learning that motivates device-aware augmentations and stricter validation."
    },
    fn:{
      before:"assets/grad_fn_before.png",
      after:"assets/grad_fn_after.png",
      desc:"A subtle effusion is missed at default thresholds but becomes detectable after label-specific threshold tuning and calibration, highlighting sensitivity–specificity trade-offs."
    }
  };
  caseTabs.addEventListener("click",function(e){
    var tab=e.target.closest(".case-tab");
    if(!tab)return;
    var key=tab.getAttribute("data-case");
    if(!cases[key])return;
    compareBefore.src=cases[key].before;
    compareAfter.src=cases[key].after;
    caseDescription.textContent=cases[key].desc;
    caseTabs.querySelectorAll(".case-tab").forEach(function(t){
      t.classList.toggle("active",t===tab);
    });
  });
}
</script>
</body>
</html>
