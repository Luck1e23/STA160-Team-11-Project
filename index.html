<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STA 160 Chest X-ray Project</title>
  <meta name="description" content="Chest X-ray classification project using NIH + CheXpert datasets and deep learning." />

  <style>
    :root {
      --bg: #070b11;
      --bg-soft: #111827;
      --surface: #141b2b;
      --surface-soft: #1b2335;
      --text: #e5edf7;
      --muted: #9aa4b8;
      --brand: #7aa2ff;
      --brand-soft: #3b82f6;
      --accent: #9effcc;
      --danger: #fb7185;
      --radius-lg: 18px;
      --radius-md: 14px;
      --shadow-lg: 0 24px 60px rgba(0,0,0,.7);
      --shadow-md: 0 16px 40px rgba(0,0,0,.55);
      --maxw: 1180px;
      --nav-h: 64px;
      --speed-fast: .18s;
      --speed: .25s;
      --blur-nav: 14px;
    }

    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; scroll-behavior: smooth; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
      background:
        radial-gradient(900px 600px at 0% 0%, rgba(122,162,255,.18), transparent 60%),
        radial-gradient(900px 600px at 100% 0%, rgba(158,255,204,.14), transparent 60%),
        linear-gradient(180deg, #020617 0%, #020617 40%, #020617 100%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      line-height: 1.6;
    }
    img { max-width: 100%; display: block; }
    a { color: inherit; text-decoration: none; }
    .container { width: min(100% - 2.4rem, var(--maxw)); margin-inline: auto; }

    /* Header / Nav */
    header {
      position: sticky;
      top: 0;
      z-index: 40;
      backdrop-filter: blur(var(--blur-nav)) saturate(150%);
      background: linear-gradient(90deg, rgba(2,6,23,.88), rgba(15,23,42,.9));
      border-bottom: 1px solid rgba(148,163,184,.25);
      transition: background var(--speed-fast) ease, border-color var(--speed-fast) ease, box-shadow var(--speed-fast) ease, transform var(--speed-fast) ease;
    }
    header.scrolled {
      background: linear-gradient(90deg, rgba(2,6,23,.96), rgba(15,23,42,.96));
      border-color: rgba(148,163,184,.32);
      box-shadow: 0 14px 40px rgba(15,23,42,.8);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-height: var(--nav-h);
      gap: 1.2rem;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: .7rem;
      font-weight: 700;
      letter-spacing: .28px;
      font-size: .98rem;
    }
    .brand-mark {
      inline-size: 38px;
      block-size: 38px;
      border-radius: 12px;
      background:
        radial-gradient(circle at 0 0, #dbeafe, transparent 55%),
        linear-gradient(135deg, #38bdf8, #7aa2ff 40%, #9effcc 100%);
      display: grid;
      place-items: center;
      color: #020617;
      font-weight: 900;
      font-size: 17px;
      box-shadow: 0 12px 35px rgba(15,23,42,.7);
    }
    .brand-sub {
      display: block;
      font-size: .78rem;
      font-weight: 500;
      color: var(--muted);
    }

    .nav-main {
      display: flex;
      align-items: center;
      gap: .4rem;
      position: relative;
    }
    .nav-item {
      position: relative;
      padding-inline: .7rem;
      border-radius: 999px;
      font-size: .92rem;
      font-weight: 500;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: .25rem;
      cursor: pointer;
      height: 36px;
      transition: background var(--speed-fast) ease, color var(--speed-fast) ease, transform var(--speed-fast) ease;
    }
    .nav-item span.label { pointer-events: none; }
    .nav-item:hover {
      background: rgba(148,163,184,.25);
      transform: translateY(-1px);
    }
    .nav-item .caret {
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 5px solid rgba(209,213,219,.9);
      transition: transform var(--speed-fast) ease;
    }
    .nav-item.active .caret { transform: rotate(180deg) translateY(1px); }

    .nav-cta {
      display: flex;
      align-items: center;
      gap: .4rem;
    }
    .nav-pill {
      font-size: .82rem;
      padding: .35rem .7rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.6);
      color: #e5e7eb;
      background: rgba(15,23,42,.8);
      display: inline-flex;
      align-items: center;
      gap: .35rem;
    }
    .nav-pill-dot {
      width: 6px; height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34,197,94,.25);
    }
    .btn-small {
      padding: .45rem .9rem;
      border-radius: 999px;
      font-size: .82rem;
      border: none;
      background: linear-gradient(135deg, #60a5fa, #22c55e);
      color: #020617;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: .35rem;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(37,99,235,.55);
      transition: transform var(--speed-fast) ease, box-shadow var(--speed-fast) ease, filter var(--speed-fast) ease;
    }
    .btn-small:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 40px rgba(30,64,175,.75);
      filter: brightness(1.05);
    }

    .nav-toggle {
      display: none;
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.55);
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: rgba(15,23,42,.9);
    }
    .nav-toggle span,
    .nav-toggle span::before,
    .nav-toggle span::after {
      content: "";
      display: block;
      width: 14px;
      height: 1.7px;
      border-radius: 999px;
      background: #e5e7eb;
      transition: transform var(--speed-fast) ease, opacity var(--speed-fast) ease;
    }
    .nav-toggle span::before { transform: translateY(-4px); }
    .nav-toggle span::after { transform: translateY(4px); }
    .nav-toggle.open span { transform: rotate(45deg); }
    .nav-toggle.open span::before { transform: rotate(-90deg); }
    .nav-toggle.open span::after { opacity: 0; }

    @media (max-width: 860px) {
      .nav-main,
      .nav-cta {
        display: none;
      }
      .nav-toggle {
        display: inline-flex;
      }
      header.scrolled {
        box-shadow: 0 10px 30px rgba(15,23,42,.9);
      }
    }

    .nav-mobile-panel {
      display: none;
      background: radial-gradient(circle at 0 0, rgba(56,189,248,.12), transparent 60%), #020617;
      border-bottom: 1px solid rgba(148,163,184,.35);
      box-shadow: 0 20px 50px rgba(15,23,42,.9);
    }
    .nav-mobile-panel.open {
      display: block;
    }
    .nav-mobile-inner {
      padding: .75rem 1.1rem 1.1rem;
      display: grid;
      gap: .4rem;
    }
    .nav-mobile-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: .55rem .35rem;
      border-radius: 10px;
      color: #e5e7eb;
      font-size: .95rem;
      cursor: pointer;
    }
    .nav-mobile-item:hover {
      background: rgba(31,41,55,.85);
    }
    .nav-mobile-item span.kicker {
      color: var(--muted);
      font-size: .8rem;
    }
    .nav-mobile-chevron {
      width: 18px;
      text-align: center;
      font-size: 1rem;
      transform: translateY(-1px);
    }
    .nav-mobile-sub {
      max-height: 0;
      overflow: hidden;
      transition: max-height var(--speed) ease;
    }
    .nav-mobile-sub.open {
      max-height: 300px;
    }
    .nav-mobile-sub ul {
      list-style: none;
      padding: .1rem 0 .4rem .2rem;
      margin: 0;
      display: grid;
      gap: .25rem;
      font-size: .88rem;
      color: var(--muted);
    }
    .nav-mobile-sub a {
      padding: .22rem .4rem;
      border-radius: 8px;
      display: inline-block;
    }
    .nav-mobile-sub a:hover {
      background: rgba(31,41,55,.9);
      color: #e5e7eb;
    }

    /* Mega menu (desktop) */
    .mega-root {
      position: absolute;
      inset-inline: 0;
      top: calc(var(--nav-h) - 4px);
      transform: translateY(8px);
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--speed-fast) ease, transform var(--speed-fast) ease;
    }
    .mega-root.open {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    .mega-shell {
      width: min(100% - 2.4rem, var(--maxw));
      margin-inline: auto;
    }
    .mega-panel {
      display: none;
      background: radial-gradient(circle at 0 0, rgba(56,189,248,.14), transparent 55%), var(--bg-soft);
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,.45);
      box-shadow: var(--shadow-lg);
      padding: 1.2rem 1.5rem 1.3rem;
    }
    .mega-panel.active {
      display: grid;
    }
    .mega-grid {
      display: grid;
      grid-template-columns: 1.4fr 1fr 1fr;
      gap: 1.2rem;
    }
    .mega-col h4 {
      margin: 0 0 .3rem;
      font-size: .86rem;
      text-transform: uppercase;
      letter-spacing: .14em;
      color: #e5e7eb;
    }
    .mega-col p {
      margin: 0 0 .6rem;
      font-size: .82rem;
      color: var(--muted);
    }
    .mega-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: .28rem;
      font-size: .9rem;
    }
    .mega-list a {
      display: flex;
      justify-content: space-between;
      gap: .6rem;
      padding: .32rem .4rem;
      border-radius: 9px;
      color: #e5e7eb;
      cursor: pointer;
      border: 1px solid transparent;
    }
    .mega-list a span.sub {
      font-size: .8rem;
      color: var(--muted);
    }
    .mega-list a:hover {
      background: rgba(15,23,42,.95);
      border-color: rgba(96,165,250,.6);
      box-shadow: 0 10px 30px rgba(15,23,42,.9);
    }
    .mega-badge {
      display: inline-flex;
      align-items: center;
      gap: .25rem;
      font-size: .78rem;
      background: rgba(34,197,94,.18);
      border-radius: 999px;
      padding: .12rem .5rem;
      color: #bbf7d0;
      border: 1px solid rgba(74,222,128,.6);
    }
    .mega-pill {
      font-size: .78rem;
      display: inline-flex;
      align-items: center;
      gap: .28rem;
      padding: .16rem .5rem;
      border-radius: 999px;
      background: rgba(30,64,175,.7);
      color: #dbeafe;
      border: 1px solid rgba(129,140,248,.7);
    }

    @media (max-width: 860px) {
      .mega-root { display: none; }
    }

    /* Hero */
    .hero {
      position: relative;
      padding: 3.8rem 0 3.1rem;
      overflow: hidden;
    }
    .hero-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, .95fr);
      gap: 2.3rem;
      align-items: center;
    }
    .hero-eyebrow {
      font-size: .78rem;
      text-transform: uppercase;
      letter-spacing: .14em;
      color: #a5b4fc;
      margin-bottom: .4rem;
      display: flex;
      align-items: center;
      gap: .5rem;
    }
    .hero-eyebrow span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34,197,94,.36);
    }
    .hero-title {
      font-size: clamp(2.4rem, 4vw, 3.3rem);
      line-height: 1.05;
      margin: .25rem 0 .6rem;
    }
    .hero-subtitle {
      color: var(--muted);
      font-size: .98rem;
      max-width: 38rem;
    }
    .hero-badges {
      display: flex;
      flex-wrap: wrap;
      gap: .45rem;
      margin-top: .85rem;
      font-size: .78rem;
    }
    .hero-badge {
      border-radius: 999px;
      padding: .2rem .55rem;
      border: 1px solid rgba(148,163,184,.6);
      background: radial-gradient(circle at 0 0, rgba(148,163,184,.4), transparent 55%), rgba(15,23,42,.85);
      color: #e5e7eb;
    }
    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: .7rem;
      margin-top: 1.35rem;
      align-items: center;
    }
    .btn-main {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: .4rem;
      padding: .85rem 1.4rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #60a5fa, #22c55e);
      color: #020617;
      font-weight: 700;
      font-size: .95rem;
      cursor: pointer;
      box-shadow: 0 22px 40px rgba(37,99,235,.7);
      transition: transform var(--speed-fast) ease, box-shadow var(--speed-fast) ease, filter var(--speed-fast) ease;
    }
    .btn-main:hover {
      transform: translateY(-1px);
      box-shadow: 0 28px 60px rgba(30,64,175,.9);
      filter: brightness(1.04);
    }
    .btn-ghost {
      padding: .8rem 1.15rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.7);
      background: rgba(15,23,42,.9);
      color: #e5e7eb;
      font-size: .9rem;
      display: inline-flex;
      align-items: center;
      gap: .35rem;
      cursor: pointer;
      transition: background var(--speed-fast) ease, border-color var(--speed-fast) ease, transform var(--speed-fast) ease;
    }
    .btn-ghost:hover {
      background: rgba(30,64,175,.9);
      border-color: rgba(96,165,250,.9);
      transform: translateY(-1px);
    }
    .btn-ghost span.icon {
      font-size: 1rem;
      transform: translateY(1px);
    }

    .hero-stats {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 1rem;
      margin-top: 2.2rem;
    }
    .stat-card {
      background: var(--surface);
      border-radius: var(--radius-md);
      border: 1px solid rgba(148,163,184,.35);
      padding: 1rem;
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
    }
    .stat-card::after {
      content: "";
      position: absolute;
      inset-inline: -40%;
      height: 1px;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(96,165,250,.85), transparent);
      opacity: .8;
    }
    .stat-label {
      font-size: .8rem;
      text-transform: uppercase;
      color: var(--muted);
      letter-spacing: .16em;
      margin-bottom: .4rem;
    }
    .stat-value {
      font-size: 1.45rem;
      font-weight: 800;
    }
    .stat-caption {
      font-size: .82rem;
      color: var(--muted);
    }

    .hero-panel {
      background: radial-gradient(circle at 0 0, rgba(56,189,248,.4), transparent 60%), var(--surface-soft);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148,163,184,.45);
      box-shadow: var(--shadow-lg);
      padding: 1rem;
      position: relative;
      overflow: hidden;
    }
    .hero-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: .6rem;
      font-size: .86rem;
      color: var(--muted);
    }
    .hero-pill {
      border-radius: 999px;
      padding: .15rem .6rem;
      border: 1px solid rgba(191,219,254,.7);
      background: rgba(15,23,42,.9);
      font-size: .78rem;
      color: #bfdbfe;
      display: inline-flex;
      align-items: center;
      gap: .3rem;
    }
    .hero-mini-dot {
      width: 7px; height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }
    .hero-preview {
      border-radius: 14px;
      border: 1px dashed rgba(148,163,184,.55);
      background:
        radial-gradient(circle at 0 0, rgba(148,163,184,.4), transparent 65%),
        #020617;
      aspect-ratio: 4/3;
      overflow: hidden;
      position: relative;
      display: grid;
      place-items: center;
      color: var(--muted);
      font-size: .84rem;
      text-align: center;
    }
    .hero-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: .96;
    }
    .hero-preview-label {
      position: absolute;
      inset-inline: 0;
      bottom: 0;
      padding: .35rem .6rem;
      font-size: .78rem;
      background: linear-gradient(to top, rgba(0,0,0,.78), transparent);
      text-align: left;
    }
    .hero-note {
      margin-top: .7rem;
      font-size: .82rem;
      color: var(--muted);
    }

    @media (max-width: 980px) {
      .hero-grid {
        grid-template-columns: minmax(0, 1fr);
      }
      .hero {
        padding-top: 3rem;
      }
    }
    @media (max-width: 840px) {
      .hero-stats {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (max-width: 540px) {
      .hero-stats {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* Sections */
    section {
      padding: 3.1rem 0;
    }
    .section-head {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1.2rem;
    }
    .section-head h2 {
      margin: 0;
      font-size: 1.55rem;
    }
    .section-tag {
      font-size: .78rem;
      padding: .18rem .6rem;
      border-radius: 999px;
      background: rgba(15,23,42,.9);
      border: 1px solid rgba(148,163,184,.5);
      color: #cbd5f5;
    }

    .grid {
      display: grid;
      gap: 1rem;
    }
    .grid.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .grid.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    @media (max-width: 960px) {
      .grid.cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 720px) {
      .grid.cols-3,
      .grid.cols-2 { grid-template-columns: minmax(0, 1fr); }
    }

    .card {
      background: var(--surface);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148,163,184,.3);
      padding: 1rem 1.1rem;
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
    }
    .card h3 {
      margin: .1rem 0 .2rem;
      font-size: 1.02rem;
    }
    .card p {
      margin: .25rem 0 0;
      font-size: .9rem;
      color: var(--muted);
    }

    .row { display: flex; flex-wrap: wrap; gap: .5rem; align-items: center; }
    .tag {
      display: inline-flex;
      padding: .18rem .55rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.55);
      font-size: .8rem;
      color: #e5e7eb;
      background: rgba(15,23,42,.9);
    }
    .spacer { block-size: .9rem; }
    .note { font-size: .86rem; color: var(--muted); }

    /* Method timeline */
    .timeline {
      display: grid;
      gap: .9rem;
    }
    .step {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: .9rem;
      align-items: flex-start;
    }
    .bullet {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, #a5b4fc, #3b82f6);
      box-shadow: 0 0 0 5px rgba(59,130,246,.35);
      margin-top: .22rem;
    }
    .step strong {
      font-size: .95rem;
    }

    /* Tables */
    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 14px;
      overflow: hidden;
      font-size: .88rem;
    }
    th, td {
      padding: .75rem .9rem;
      border-bottom: 1px solid rgba(148,163,184,.28);
      text-align: left;
    }
    thead th {
      background: rgba(30,64,175,.45);
      color: #e5e7eb;
    }
    tbody tr:nth-child(odd) {
      background: rgba(15,23,42,.9);
    }
    tbody tr:nth-child(even) {
      background: rgba(15,23,42,.7);
    }
    tbody tr:hover {
      background: rgba(30,64,175,.85);
    }

    /* Gallery & lightbox */
    .gallery {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: .7rem;
    }
    @media (max-width: 900px) {
      .gallery { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 640px) {
      .gallery { grid-template-columns: minmax(0, 1fr); }
    }

    .shot {
      position: relative;
      aspect-ratio: 4/3;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.5);
      overflow: hidden;
      cursor: zoom-in;
      box-shadow: var(--shadow-md);
      background: #020617;
      display: grid;
      place-items: center;
      color: var(--muted);
      font-size: .86rem;
      transition: transform var(--speed-fast) ease, box-shadow var(--speed-fast) ease, border-color var(--speed-fast) ease;
    }
    .shot img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .shot span {
      position: absolute;
      inset-inline: 0;
      bottom: 0;
      padding: .32rem .55rem;
      font-size: .8rem;
      background: linear-gradient(to top, rgba(0,0,0,.85), transparent);
      text-align: left;
      color: #e5e7eb;
    }
    .shot:hover {
      transform: translateY(-3px) scale(1.01);
      border-color: rgba(96,165,250,.85);
      box-shadow: var(--shadow-lg);
    }

    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.88);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--speed-fast) ease;
      z-index: 60;
    }
    .lightbox.open {
      opacity: 1;
      pointer-events: auto;
    }
    .lightbox img {
      max-width: min(92vw, 1100px);
      max-height: 90vh;
      border-radius: 16px;
      box-shadow: 0 28px 80px rgba(0,0,0,.9);
    }

    /* Team */
    .team {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 1rem;
    }
    @media (max-width: 1180px) {
      .team { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    @media (max-width: 780px) {
      .team { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 520px) {
      .team { grid-template-columns: minmax(0, 1fr); }
    }

    .member {
      text-align: center;
      padding: 1rem;
      border-radius: var(--radius-lg);
      background: var(--surface);
      border: 1px solid rgba(148,163,184,.4);
      box-shadow: var(--shadow-md);
      transition: transform var(--speed-fast) ease, box-shadow var(--speed-fast) ease, border-color var(--speed-fast) ease;
    }
    .member:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
      border-color: rgba(129,140,248,.8);
    }
    .avatar {
      width: 78px;
      height: 78px;
      border-radius: 999px;
      margin-inline: auto;
      margin-bottom: .5rem;
      display: grid;
      place-items: center;
      font-weight: 800;
      color: #020617;
      background:
        radial-gradient(circle at 0 0, #f9fafb, transparent 55%),
        conic-gradient(from 210deg, #38bdf8, #7aa2ff 40%, #4ade80 70%, #22c55e 100%);
      box-shadow: 0 18px 45px rgba(15,23,42,.85);
    }
    .member h3 {
      margin: .25rem 0 .1rem;
      font-size: .98rem;
    }
    .member .role {
      font-size: .86rem;
      color: var(--muted);
    }

    /* Footer */
    footer {
      margin-top: 1.5rem;
      padding: 2.4rem 0 2rem;
      border-top: 1px solid rgba(148,163,184,.4);
      background: linear-gradient(180deg, rgba(15,23,42,.95), #020617 100%);
      color: var(--muted);
    }
    .footer-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 1.2rem;
      font-size: .86rem;
    }
    @media (max-width: 840px) {
      .footer-grid { grid-template-columns: 1fr 1fr; }
    }
    @media (max-width: 540px) {
      .footer-grid { grid-template-columns: minmax(0, 1fr); }
    }
    .footer-brand {
      display: flex;
      align-items: center;
      gap: .7rem;
      margin-bottom: .45rem;
    }
    .footer-brand .brand-mark {
      inline-size: 32px;
      block-size: 32px;
      font-size: 14px;
    }
    .footer-grid ul {
      list-style: none;
      padding: 0;
      margin: .45rem 0 0;
      display: grid;
      gap: .25rem;
    }
    .footer-grid a {
      color: #e5e7eb;
      opacity: .9;
    }
    .footer-grid a:hover {
      opacity: 1;
      text-decoration: underline;
    }

    /* Scroll reveal */
    .reveal {
      opacity: 0;
      transform: translateY(24px);
      transition: opacity .5s ease, transform .5s ease;
    }
    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* Back to top */
    .to-top {
      position: fixed;
      right: 1.4rem;
      bottom: 1.4rem;
      z-index: 55;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 38px;
      height: 38px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.55);
      background: rgba(15,23,42,.94);
      color: #e5e7eb;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 14px 32px rgba(15,23,42,.8);
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--speed-fast) ease, transform var(--speed-fast) ease;
    }
    .to-top.visible {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <header id="site-header">
    <div class="container nav">
      <div class="brand">
        <div class="brand-mark">XR</div>
        <div>
          STA 160 — Chest X-ray
          <span class="brand-sub">Multi-label thoracic pathology benchmarking</span>
        </div>
      </div>

      <nav class="nav-main" aria-label="Primary">
        <button class="nav-item" data-menu-target="overview">
          <span class="label">Overview</span>
          <span class="caret"></span>
        </button>
        <button class="nav-item" data-menu-target="datasets">
          <span class="label">Datasets</span>
          <span class="caret"></span>
        </button>
        <button class="nav-item" data-menu-target="method">
          <span class="label">Method</span>
          <span class="caret"></span>
        </button>
        <button class="nav-item" data-menu-target="results">
          <span class="label">Results</span>
          <span class="caret"></span>
        </button>
        <button class="nav-item" data-menu-target="gallery">
          <span class="label">Gallery</span>
          <span class="caret"></span>
        </button>
        <a href="#team" class="nav-item">
          <span class="label">Team</span>
        </a>
      </nav>

      <div class="nav-cta">
        <span class="nav-pill">
          <span class="nav-pill-dot"></span>
          NIH + CheXpert
        </span>
        <button class="btn-small" onclick="document.querySelector('#results').scrollIntoView({behavior:'smooth'})">
          View metrics
          <span>↗</span>
        </button>
      </div>

      <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">
        <span></span>
      </button>
    </div>

    <div class="mega-root" id="mega-root">
      <div class="mega-shell">
        <div class="mega-panel" data-menu="overview">
          <div class="mega-grid">
            <div class="mega-col">
              <h4>Project abstract</h4>
              <p>This project explores deep-learning-based detection of thoracic diseases from chest X-ray images. Using 112k NIH CXRs and CheXpert-inspired labels, we fine-tune pre-trained models to benchmark multi-label performance and interpretability.</p>
              <span class="mega-badge">STA 160 • Fall 2025</span>
            </div>
            <div class="mega-col">
              <h4>Quick navigation</h4>
              <ul class="mega-list">
                <li><a href="#datasets">Datasets <span class="sub">NIH ChestX-ray14, splits, ethics</span></a></li>
                <li><a href="#method">Pipeline <span class="sub">Preprocessing → training → analysis</span></a></li>
                <li><a href="#results">Metrics <span class="sub">Macro ROC / PR, per-label AUC</span></a></li>
              </ul>
            </div>
            <div class="mega-col">
              <h4>Highlights</h4>
              <ul class="mega-list">
                <li><a href="#results">ROC curves <span class="sub">DenseNet-121 vs ResNet-50 vs EffNet-B0</span></a></li>
                <li><a href="#gallery">Grad-CAM gallery <span class="sub">True / False positives & negatives</span></a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="mega-panel" data-menu="datasets">
          <div class="mega-grid">
            <div class="mega-col">
              <h4>Datasets</h4>
              <p>Curated large-scale chest X-ray data for robust benchmarking.</p>
              <span class="mega-pill">112k+ NIH images • 14 labels</span>
            </div>
            <div class="mega-col">
              <h4>NIH ChestX-ray14</h4>
              <ul class="mega-list">
                <li><a href="#datasets">Overview <span class="sub">14-pathology labels, long-tailed distribution</span></a></li>
                <li><a href="#datasets">Preprocessing <span class="sub">224×224 resize, normalization, CLAHE</span></a></li>
                <li><a href="#datasets">Splits & ethics <span class="sub">Patient-wise train/valid/test, PHI-free</span></a></li>
              </ul>
            </div>
            <div class="mega-col">
              <h4>CheXpert-inspired setup</h4>
              <ul class="mega-list">
                <li><a href="#datasets">Label policy <span class="sub">U-ignore / U-zero strategies</span></a></li>
                <li><a href="#datasets">Competition labels <span class="sub">No Finding, Edema, Cardiomegaly, etc.</span></a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="mega-panel" data-menu="method">
          <div class="mega-grid">
            <div class="mega-col">
              <h4>End-to-end pipeline</h4>
              <p>From DICOM/PNG ingestion to calibrated multi-label predictions and Grad-CAM error analysis.</p>
            </div>
            <div class="mega-col">
              <h4>Modeling</h4>
              <ul class="mega-list">
                <li><a href="#method">Backbones <span class="sub">ResNet-50, DenseNet-121, EfficientNet-B0</span></a></li>
                <li><a href="#method">Loss & optimization <span class="sub">BCEWithLogitsLoss + class weights, AdamW</span></a></li>
                <li><a href="#method">Training schedule <span class="sub">Cosine LR, early stopping on AUC</span></a></li>
              </ul>
            </div>
            <div class="mega-col">
              <h4>Evaluation</h4>
              <ul class="mega-list">
                <li><a href="#results">Macro / micro metrics <span class="sub">Per-label ROC / PR, Youden’s J</span></a></li>
                <li><a href="#gallery">Qualitative checks <span class="sub">Grad-CAM inspection of shortcuts</span></a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="mega-panel" data-menu="results">
          <div class="mega-grid">
            <div class="mega-col">
              <h4>Validation metrics</h4>
              <p>Compare backbones on macro AUC-ROC / AUC-PR and per-label performance for key pathologies.</p>
              <span class="mega-pill">DenseNet-121 • ResNet-50 • EffNet-B0</span>
            </div>
            <div class="mega-col">
              <h4>Summary tables</h4>
              <ul class="mega-list">
                <li><a href="#results">Model summary <span class="sub">Macro AUC-ROC / PR, parameter counts</span></a></li>
                <li><a href="#results">Per-label ROC <span class="sub">Cardiomegaly, Pleural Effusion, Edema, …</span></a></li>
              </ul>
            </div>
            <div class="mega-col">
              <h4>Visual diagnostics</h4>
              <ul class="mega-list">
                <li><a href="#results">ROC gallery <span class="sub">DenseNet vs ResNet vs EffNet</span></a></li>
                <li><a href="#gallery">Grad-CAM examples <span class="sub">True / false predictions and failure modes</span></a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="mega-panel" data-menu="gallery">
          <div class="mega-grid">
            <div class="mega-col">
              <h4>Visual gallery</h4>
              <p>Explore ROC curves, confusion matrices, and Grad-CAM overlays to understand model behavior.</p>
              <span class="mega-pill">Interactive lightbox viewer</span>
            </div>
            <div class="mega-col">
              <h4>Quantitative</h4>
              <ul class="mega-list">
                <li><a href="#results">ROC curves <span class="sub">Classifier trade-offs & thresholds</span></a></li>
                <li><a href="#results">Confusion matrices <span class="sub">Disease-wise error patterns</span></a></li>
              </ul>
            </div>
            <div class="mega-col">
              <h4>Qualitative</h4>
              <ul class="mega-list">
                <li><a href="#gallery">True positives <span class="sub">Correctly localized findings</span></a></li>
                <li><a href="#gallery">False positives / negatives <span class="sub">Shortcuts & missed signals</span></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="nav-mobile-panel" id="nav-mobile-panel">
      <div class="nav-mobile-inner">
        <div class="nav-mobile-item" data-mobile-toggle="overview">
          <div>
            Overview
            <div class="kicker">Abstract, highlights, quick links</div>
          </div>
          <div class="nav-mobile-chevron">▸</div>
        </div>
        <div class="nav-mobile-sub" data-mobile-panel="overview">
          <ul>
            <li><a href="#top">Intro hero</a></li>
            <li><a href="#results">Model summary</a></li>
          </ul>
        </div>

        <div class="nav-mobile-item" data-mobile-toggle="datasets">
          <div>
            Datasets
            <div class="kicker">NIH ChestX-ray14, splits, ethics</div>
          </div>
          <div class="nav-mobile-chevron">▸</div>
        </div>
        <div class="nav-mobile-sub" data-mobile-panel="datasets">
          <ul>
            <li><a href="#datasets">Dataset cards</a></li>
          </ul>
        </div>

        <div class="nav-mobile-item" data-mobile-toggle="method">
          <div>
            Method
            <div class="kicker">Preprocessing, models, training</div>
          </div>
          <div class="nav-mobile-chevron">▸</div>
        </div>
        <div class="nav-mobile-sub" data-mobile-panel="method">
          <ul>
            <li><a href="#method">Pipeline timeline</a></li>
          </ul>
        </div>

        <div class="nav-mobile-item" data-mobile-toggle="results">
          <div>
            Results
            <div class="kicker">Macro / per-label metrics</div>
          </div>
          <div class="nav-mobile-chevron">▸</div>
        </div>
        <div class="nav-mobile-sub" data-mobile-panel="results">
          <ul>
            <li><a href="#results">Validation tables</a></li>
            <li><a href="#results">ROC gallery</a></li>
          </ul>
        </div>

        <div class="nav-mobile-item" data-mobile-toggle="gallery">
          <div>
            Gallery
            <div class="kicker">Grad-CAM & predictions</div>
          </div>
          <div class="nav-mobile-chevron">▸</div>
        </div>
        <div class="nav-mobile-sub" data-mobile-panel="gallery">
          <ul>
            <li><a href="#gallery">Qualitative examples</a></li>
          </ul>
        </div>

        <a href="#team" class="nav-mobile-item">
          <div>
            Team
            <div class="kicker">STA 160 • UC Davis</div>
          </div>
        </a>
      </div>
    </div>
  </header>

  <main id="top">
    <section class="hero reveal">
      <div class="container hero-grid">
        <div>
          <div class="hero-eyebrow">
            <span class="dot"></span>
            NIH + CheXpert • CNNs • Transfer Learning
          </div>
          <h1 class="hero-title">Chest X-ray Classification for Multi-Label Thoracic Pathologies</h1>
          <p class="hero-subtitle">
            We benchmark pre-trained CNNs to detect common thoracic findings from frontal chest X-rays. Our pipeline covers
            curation, preprocessing, training, calibration, and error analysis with clear, reproducible steps.
          </p>
          <div class="hero-badges">
            <span class="hero-badge">112k+ NIH CXRs</span>
            <span class="hero-badge">14 NIH labels</span>
            <span class="hero-badge">5 CheXpert competition labels</span>
          </div>
          <div class="hero-actions">
            <button class="btn-main" onclick="document.querySelector('#results').scrollIntoView({behavior:'smooth'})">
              View validation metrics
              <span>↗</span>
            </button>
            <button class="btn-ghost" onclick="document.querySelector('#method').scrollIntoView({behavior:'smooth'})">
              <span class="icon">▶</span>
              See our pipeline
            </button>
          </div>

          <div class="hero-stats">
            <div class="stat-card">
              <div class="stat-label">Images</div>
              <div class="stat-value">112k+</div>
              <div class="stat-caption">NIH ChestX-ray14</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Images</div>
              <div class="stat-value">224k+</div>
              <div class="stat-caption">CheXpert-style labels</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Labels</div>
              <div class="stat-value">14</div>
              <div class="stat-caption">NIH pathologies</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Labels</div>
              <div class="stat-value">5</div>
              <div class="stat-caption">CheXpert competition</div>
            </div>
          </div>
        </div>

        <aside class="hero-panel">
          <div class="hero-panel-header">
            <span>Validation snapshot</span>
            <span class="hero-pill">
              <span class="hero-mini-dot"></span>
              ROC / Confusion Preview
            </span>
          </div>
          <div class="hero-preview" data-lightbox>
            <img src="assets/hero_roc.png" alt="Sample ROC and confusion matrix preview (swap hero_roc.png)" />
            <span class="hero-preview-label">Replace <code>assets/hero_roc.png</code> with your favorite ROC / CM composite figure.</span>
          </div>
          <p class="hero-note">Click the preview to open it in a lightbox. All other ROC and Grad-CAM panels on this page support the same interaction.</p>
        </aside>
      </div>
    </section>

    <section id="datasets" class="reveal">
      <div class="container">
        <div class="section-head">
          <h2>Datasets</h2>
          <span class="section-tag">Data curation</span>
        </div>
        <div class="grid cols-3">
          <article class="card">
            <h3>NIH ChestX-ray14</h3>
            <p>112,120 frontal CXRs annotated for 14 pathologies. Multi-label setting with heavily long-tailed label distribution across diseases.</p>
            <div class="spacer"></div>
            <div class="row">
              <span class="tag">Train/Valid/Test split</span>
              <span class="tag">224×224</span>
              <span class="tag">Augment: flip/crop</span>
            </div>
          </article>
          <article class="card">
            <h3>CheXpert-style labels</h3>
            <p>224,316 images with 5 competition labels (No Finding, Edema, Cardiomegaly, Consolidation, Pleural Effusion). Uncertainty handled with U-ignore / U-zero policies.</p>
            <div class="spacer"></div>
            <div class="row">
              <span class="tag">U-label policy</span>
              <span class="tag">CLAHE</span>
              <span class="tag">Center-crop</span>
            </div>
          </article>
          <article class="card">
            <h3>Test set & Ethics</h3>
            <p>Held-out test set balanced per label prevalence. PHI-free, academic use only; models audited for shortcut learning and spurious correlations.</p>
            <div class="spacer"></div>
            <div class="row">
              <span class="tag">Stratified</span>
              <span class="tag">Label smoothing</span>
              <span class="tag">AUC-PR focus</span>
            </div>
          </article>
        </div>
      </div>
    </section>

    <section id="method" class="reveal">
      <div class="container">
        <div class="section-head">
          <h2>Method</h2>
          <span class="section-tag">Reproducible pipeline</span>
        </div>
        <div class="card">
          <div class="timeline">
            <div class="step">
              <div class="bullet" aria-hidden="true"></div>
              <div>
                <strong>Preprocessing</strong>
                <p class="note">DICOM/PNG read → resize 224×224 → grayscale normalization → optional CLAHE → patient-wise train/valid/test split.</p>
              </div>
            </div>
            <div class="step">
              <div class="bullet" aria-hidden="true"></div>
              <div>
                <strong>Models</strong>
                <p class="note">Transfer learning with ResNet-50, DenseNet-121, EfficientNet-B0 backbones. Final linear head with sigmoid outputs for multi-label BCE.</p>
              </div>
            </div>
            <div class="step">
              <div class="bullet" aria-hidden="true"></div>
              <div>
                <strong>Training</strong>
                <p class="note">BCEWithLogitsLoss with class weights; AdamW optimizer; cosine learning-rate schedule; early stopping based on macro AUC-ROC.</p>
              </div>
            </div>
            <div class="step">
              <div class="bullet" aria-hidden="true"></div>
              <div>
                <strong>Evaluation</strong>
                <p class="note">Per-label AUC-ROC / PR, threshold tuning via Youden’s J; reporting macro/micro metrics; calibration with temperature scaling.</p>
              </div>
            </div>
            <div class="step">
              <div class="bullet" aria-hidden="true"></div>
              <div>
                <strong>Error analysis</strong>
                <p class="note">Confusions by view, device, and sex; Grad-CAM sanity checks; slice-wise breakdown for long-tail classes and failure modes.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="results" class="reveal">
      <div class="container">
        <div class="section-head">
          <h2>Results</h2>
          <span class="section-tag">Metrics</span>
        </div>
        <div class="grid cols-2">
          <article class="card">
            <h3 style="margin-bottom:.6rem">Summary (Validation)</h3>
            <table aria-label="validation summary">
              <thead>
                <tr>
                  <th>Model</th>
                  <th>Macro AUC-ROC</th>
                  <th>Macro AUC-PR</th>
                  <th>Params</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>DenseNet-121</td><td>0.86</td><td>0.41</td><td>8.0M</td></tr>
                <tr><td>ResNet-50</td><td>0.84</td><td>0.38</td><td>25.6M</td></tr>
                <tr><td>EfficientNet-B0</td><td>0.83</td><td>0.36</td><td>5.3M</td></tr>
              </tbody>
            </table>
            <p class="note">Replace with your numbers. Report both ROC and PR due to label imbalance.</p>
          </article>

          <article class="card">
            <h3 style="margin-bottom:.6rem">Per-Label AUC-ROC (Sample)</h3>
            <table aria-label="per label auc">
              <thead>
                <tr>
                  <th>Label</th>
                  <th>AUC</th>
                  <th>Support</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>Cardiomegaly</td><td>0.92</td><td>8,753</td></tr>
                <tr><td>Pleural Effusion</td><td>0.90</td><td>13,842</td></tr>
                <tr><td>Edema</td><td>0.88</td><td>6,410</td></tr>
                <tr><td>Consolidation</td><td>0.81</td><td>5,102</td></tr>
                <tr><td>No Finding</td><td>0.78</td><td>—</td></tr>
              </tbody>
            </table>
            <p class="note">Populate the table from your experiment logs or CSV exports.</p>
          </article>
        </div>

        <div class="spacer"></div>

        <div class="card">
          <h3 style="margin:0 0 .6rem">Confusion Matrix / ROC Gallery</h3>
          <div class="gallery">
            <div class="shot" data-lightbox>
              <img src="assets/roc_dense.png" alt="ROC curves for DenseNet-121" />
              <span>roc_dense.png</span>
            </div>
            <div class="shot" data-lightbox>
              <img src="assets/roc_resnet.png" alt="ROC curves for ResNet-50" />
              <span>roc_resnet.png</span>
            </div>
            <div class="shot" data-lightbox>
              <img src="assets/cm_cardio.png" alt="Confusion matrix for Cardiomegaly" />
              <span>cm_cardio.png</span>
            </div>
          </div>
          <p class="note" style="margin-top:.6rem">Place your PNGs in the <code>assets/</code> folder using these filenames, or update the <code>src</code> paths accordingly.</p>
        </div>
      </div>
    </section>

    <section id="gallery" class="reveal">
      <div class="container">
        <div class="section-head">
          <h2>Qualitative Examples</h2>
          <span class="section-tag">Grad-CAM / Predictions</span>
        </div>
        <div class="grid cols-3">
          <article class="card">
            <h3>True positive</h3>
            <div class="shot" data-lightbox>
              <img src="assets/gradcam_tp.png" alt="Grad-CAM true positive example" />
              <span>gradcam_tp.png</span>
            </div>
            <p class="note">E.g., cardiomegaly correctly detected with attention focused over the cardiac silhouette.</p>
          </article>
          <article class="card">
            <h3>False positive</h3>
            <div class="shot" data-lightbox>
              <img src="assets/gradcam_fp.png" alt="Grad-CAM false positive example" />
              <span>gradcam_fp.png</span>
            </div>
            <p class="note">Spurious activations over devices or lines, partially mitigated through augmentations and re-weighting.</p>
          </article>
          <article class="card">
            <h3>False negative</h3>
            <div class="shot" data-lightbox>
              <img src="assets/gradcam_fn.png" alt="Grad-CAM false negative example" />
              <span>gradcam_fn.png</span>
            </div>
            <p class="note">Small effusions missed at initial thresholds; improved with tuned operating points and calibration.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="team" class="reveal">
      <div class="container">
        <div class="section-head">
          <h2>Team</h2>
          <span class="section-tag">STA 160 • UC Davis</span>
        </div>
        <div class="team">
          <div class="member">
            <div class="avatar">ML</div>
            <h3>Muhammad Laiq</h3>
            <div class="role">Lead • Modeling & Docs</div>
          </div>
          <div class="member">
            <div class="avatar">KS</div>
            <h3>Kayla Sham</h3>
            <div class="role">Data & EDA</div>
          </div>
          <div class="member">
            <div class="avatar">TY</div>
            <h3>Tina Yu</h3>
            <div class="role">Training Ops</div>
          </div>
          <div class="member">
            <div class="avatar">LL</div>
            <h3>Lauren Le</h3>
            <div class="role">Training Ops</div>
          </div>
          <div class="member">
            <div class="avatar">FS</div>
            <h3>Fang Shang</h3>
            <div class="role">Training Ops</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer-grid">
      <div>
        <div class="footer-brand">
          <div class="brand-mark">XR</div>
          <div>
            Chest X-ray Project
            <div class="brand-sub">STA 160 • UC Davis</div>
          </div>
        </div>
        <p class="note">Course: STA 160 • Quarter: Fall 2025 • UC Davis. Deep learning for multi-label chest X-ray classification and model interpretability.</p>
      </div>
      <div>
        <strong>Links</strong>
        <ul>
          <li><a href="#datasets">Datasets</a></li>
          <li><a href="#method">Method</a></li>
          <li><a href="#results">Results</a></li>
        </ul>
      </div>
      <div>
        <strong>Contact</strong>
        <ul>
          <li><a href="mailto:you@example.edu">you@example.edu</a></li>
          <li><a href="#">GitHub repo</a></li>
          <li><a href="#">Paper / Report</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <button class="to-top" id="to-top" aria-label="Back to top">↑</button>

  <div class="lightbox" id="lightbox">
    <img src="" alt="" />
  </div>

  <script>
    const header = document.getElementById('site-header');
    const megaRoot = document.getElementById('mega-root');
    const navItems = document.querySelectorAll('[data-menu-target]');
    const megaPanels = document.querySelectorAll('.mega-panel');
    let megaOpen = false;
    let megaHideTimeout;

    function openMega(key) {
      megaOpen = true;
      megaRoot.classList.add('open');
      megaPanels.forEach(p => {
        p.classList.toggle('active', p.getAttribute('data-menu') === key);
      });
      navItems.forEach(i => {
        i.classList.toggle('active', i.getAttribute('data-menu-target') === key);
      });
    }

    function closeMega() {
      megaOpen = false;
      megaRoot.classList.remove('open');
      megaPanels.forEach(p => p.classList.remove('active'));
      navItems.forEach(i => i.classList.remove('active'));
    }

    navItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        clearTimeout(megaHideTimeout);
        const key = item.getAttribute('data-menu-target');
        openMega(key);
      });
    });

    header.addEventListener('mouseleave', () => {
      clearTimeout(megaHideTimeout);
      megaHideTimeout = setTimeout(closeMega, 120);
    });

    window.addEventListener('scroll', () => {
      header.classList.toggle('scrolled', window.scrollY > 12);
    });

    const navToggle = document.getElementById('nav-toggle');
    const navMobilePanel = document.getElementById('nav-mobile-panel');
    navToggle.addEventListener('click', () => {
      navToggle.classList.toggle('open');
      navMobilePanel.classList.toggle('open');
    });

    document.querySelectorAll('[data-mobile-toggle]').forEach(trigger => {
      trigger.addEventListener('click', () => {
        const key = trigger.getAttribute('data-mobile-toggle');
        const panel = document.querySelector('[data-mobile-panel="' + key + '"]');
        const isOpen = panel.classList.contains('open');
        document.querySelectorAll('.nav-mobile-sub').forEach(p => p.classList.remove('open'));
        document.querySelectorAll('[data-mobile-toggle]').forEach(t => t.classList.remove('open'));
        if (!isOpen) {
          panel.classList.add('open');
          trigger.classList.add('open');
        }
      });
    });

    const lightbox = document.getElementById('lightbox');
    const lightboxImg = lightbox.querySelector('img');
    document.querySelectorAll('[data-lightbox]').forEach(tile => {
      tile.addEventListener('click', () => {
        const img = tile.querySelector('img');
        if (!img) return;
        lightboxImg.src = img.src;
        lightboxImg.alt = img.alt || '';
        lightbox.classList.add('open');
      });
    });
    lightbox.addEventListener('click', () => {
      lightbox.classList.remove('open');
      lightboxImg.src = '';
    });

    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('active');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.18 });

    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    const toTop = document.getElementById('to-top');
    window.addEventListener('scroll', () => {
      toTop.classList.toggle('visible', window.scrollY > 420);
    });
    toTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
